!function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var i=n(1);window.EFLDiscoveryModule=new i.EFLDiscoveryModule(window)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),o=function(){function e(t){var n=this;i(this,e),this.context=t,t.handleMessageProxy=function(e){n.handleMessage(e)},t.onresize=function(){n.resizedScreen()},this.context.location.origin||(this.context.location.origin=this.context.location.protocol+"//"+this.context.location.hostname+(this.context.location.port?":"+this.context.location.port:"")),this.context.addEventListener("message",this.context.handleMessageProxy,!1),this.pendingEvents=[]}return a(e,[{key:"removeListener",value:function(){this.context.removeEventListener("message",this.context.handleMessageProxy)}},{key:"handleMessage",value:function(e){if(e.origin===document.location.origin){var t,n,i,a,o=JSON.parse(e.data);switch(o.type){case s.MODULE_EVENTS.INITIALIZE_MODULE:o.data&&(t=o.data.stepName,n=o.data.config),this.initializeModule(e.source,t,n);break;case s.MODULE_EVENTS.PRESSED_NAVIGATION_BUTTON:"back"===o.data.button&&this.backButtonHandler?this.backButtonHandler():"next"===o.data.button&&this.nextButtonHandler&&this.nextButtonHandler();break;case s.MODULE_EVENTS.CHANGED_LANGUAGE:o.data&&(i=o.data.language),this.changedLanguageHandler&&this.changedLanguageHandler(i);break;case s.MODULE_EVENTS.INITIALIZED_TIMER:this.initializedTimerHandler&&this.initializedTimerHandler();break;case s.MODULE_EVENTS.CHANGED_TIMER_STATE:o.data.state===s.TIMER_STATES.STARTED&&this.startedTimerHandler?this.startedTimerHandler():o.data.state===s.TIMER_STATES.PAUSED&&this.pausedTimerHandler?this.pausedTimerHandler():o.data.state===s.TIMER_STATES.FINISHED&&this.finishedTimerHandler&&this.finishedTimerHandler();break;case s.MODULE_EVENTS.TIMER_TIME_RESPONSE:o.data&&(a=o.data.time),this.timerTimeResponseHandler&&this.timerTimeResponseHandler(a)}}}},{key:"init",value:function(e){e instanceof Object&&(this.initModuleHandler=e.initModuleHandler,this.backButtonHandler=e.backButtonHandler,this.nextButtonHandler=e.nextButtonHandler,this.changedLanguageHandler=e.changedLanguageHandler,this.initializedTimerHandler=e.initializedTimerHandler,this.startedTimerHandler=e.startedTimerHandler,this.pausedTimerHandler=e.pausedTimerHandler,this.finishedTimerHandler=e.finishedTimerHandler,this.timerTimeResponseHandler=e.timerTimeResponseHandler)}},{key:"initializeModule",value:function(e,t,n){if(void 0!==e){this.eventsDestination=e,this.stepName=t;for(var i=0;i<this.pendingEvents.length;i++){var a=this.pendingEvents[i];this.eventsDestination.postMessage(JSON.stringify(a),document.location.origin)}this.pendingEvents=[]}n&&n.hasOwnProperty("applicantJourney")&&n.applicantJourney.hasOwnProperty("step")&&n.applicantJourney.step.hasOwnProperty("style")&&this.injectStyle(n.applicantJourney.step.style),this.initModuleHandler&&this.initModuleHandler(t,n)}},{key:"sendPostMessage",value:function(e,t){var n;void 0!==e&&(n={type:e},void 0!==t&&(n.data=t)),void 0!==this.eventsDestination?this.eventsDestination.postMessage(JSON.stringify(n),document.location.origin):this.pendingEvents.push(n)}},{key:"loadedModule",value:function(){this.sendPostMessage(s.MODULE_EVENTS.LOADED_MODULE,{stepName:this.stepName})}},{key:"finishedModule",value:function(e){var t={stepName:this.stepName};"object"==typeof e&&("object"==typeof e.observations&&(t.observations=e.observations),"object"==typeof e.metas&&(t.metas=e.metas),"object"==typeof e.applicant&&(t.applicant=e.applicant),"object"==typeof e.state&&(t.state=e.state)),this.sendPostMessage(s.MODULE_EVENTS.FINISHED_MODULE,t)}},{key:"loadedScreen",value:function(e){var t={};e&&(e.showNextButton===!0&&(t.showNextButton=!0),e.showBackButton===!0&&(t.showBackButton=!0),e.hideTitle===!0&&(t.hideTitle=!0),e.hideProgress===!0&&(t.hideProgress=!0),e.showTimer===!0&&(t.showTimer=!0)),this.sendPostMessage(s.MODULE_EVENTS.LOADED_SCREEN,{navigation:t}),this.resizedScreen()}},{key:"finishedScreen",value:function(e){this.sendPostMessage(s.MODULE_EVENTS.FINISHED_SCREEN,{progress:e})}},{key:"caughtException",value:function(e,t){var n={};e&&(n.category=e),t&&(n.message=t),this.sendPostMessage(s.MODULE_EVENTS.CAUGHT_EXCEPTION,n)}},{key:"resizedScreen",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.top=0,document.body.insertBefore(e,document.body.firstChild);var t=document.createElement("div");document.body.appendChild(t);var n=+e.getBoundingClientRect().top,i=+t.getBoundingClientRect().bottom,a={height:Math.ceil(i-n)};document.body.removeChild(e),document.body.removeChild(t),this.sendPostMessage(s.MODULE_EVENTS.CHANGED_HEIGHT,a)}},{key:"getElementSizeValue",value:function(e,t){var n=window.getComputedStyle(e,null)[t],i=/(\d+)px/g,a=i.exec(n);return a&&a[1]?a[1]:void 0}},{key:"injectStyle",value:function(e){var t=document.createElement("style");t.type="text/css",t.innerText=e,document.head.appendChild(t)}},{key:"initTimer",value:function(e,t,n){var i={time:e,enableTimeExtension:t!==!1,enableControl:n!==!1};this.sendPostMessage(s.MODULE_EVENTS.INIT_TIMER,i)}},{key:"startTimer",value:function(){this.sendPostMessage(s.MODULE_EVENTS.START_TIMER)}},{key:"pauseTimer",value:function(){this.sendPostMessage(s.MODULE_EVENTS.PAUSE_TIMER)}},{key:"requestTimerTime",value:function(){this.sendPostMessage(s.MODULE_EVENTS.REQUEST_TIMER_TIME)}},{key:"changedView",value:function(){this.sendPostMessage(s.MODULE_EVENTS.CHANGED_VIEW)}}]),e}();t.EFLDiscoveryModule=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={INITIALIZE_MODULE:"initializeModule",PRESSED_NAVIGATION_BUTTON:"pressedNavigationButton",LOADED_MODULE:"loadedModule",LOADED_SCREEN:"loadedScreen",FINISHED_SCREEN:"finishedScreen",FINISHED_MODULE:"finishedModule",CAUGHT_EXCEPTION:"caughtException",CHANGED_LANGUAGE:"changedLanguage",CHANGED_HEIGHT:"changedHeight",INITIALIZED_TIMER:"initializedTimer",CHANGED_TIMER_STATE:"changedTimerState",TIMER_TIME_RESPONSE:"timerTimeResponse",INIT_TIMER:"initTimer",START_TIMER:"startTimer",PAUSE_TIMER:"pauseTimer",REQUEST_TIMER_TIME:"requestTimerTime",CHANGED_VIEW:"changedView"};t.MODULE_EVENTS=n;var i={STARTED:"STARTED",PAUSED:"PAUSED",FINISHED:"FINISHED"};t.TIMER_STATES=i}]);
//# sourceMappingURL=efl-discovery.min.js.map