!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,n;return function r(t,e,n){function i(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,r,t,e,n)}return e[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c.isStatic?c(this.drainQueues):c}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(u){a=u}var c=t("./schedule"),l=t("./queue"),h=t("./util");r.prototype.disableTrampolineIfNecessary=function(){h.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},h.hasDevTools?(c.isStatic&&(c=function(t){setTimeout(t,0)}),r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},s=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},a=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var h=this._target();if(l._setBoundTo(c),c instanceof t){var f={promiseRejectionQueued:!1,promise:l,target:h,bindingPromise:c};h._then(e,s,void 0,l,f),c._then(a,u,void 0,l,f),l._setOnCancel(c)}else l._resolveCallback(h);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return 0>e&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util"),u=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),s=o.tryCatch,a=o.errorObj,u=e._async;e.prototype["break"]=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=s(t).call(this._boundValue());r===a&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,a){return function(u){var c=a._boundValue();t:for(var l=0;l<t.length;++l){var h=t[l];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return o(n).call(c,u)}else if("function"==typeof h){var f=o(h).call(c,u);if(f===s)return f;if(f)return o(n).call(c,u)}else if(r.isObject(u)){for(var p=i(h),d=0;d<p.length;++d){var v=p[d];if(h[v]!=u[v])continue t}return o(n).call(c,u)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,s=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){return i?new e:void 0}function r(){var t=o.length-1;return t>=0?o[t]:void 0}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.activateLongStackTraces=function(){i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+N.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function i(t){if(!this.isCancellable())return this;var e=this._onCancel();void 0!==e?N.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function o(){return this._onCancelField}function s(t){this._onCancelField=t}function a(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function c(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function l(){var t=this._boundTo;return void 0!==t&&t instanceof e?t.isFulfilled()?t.value():void 0:t}function h(){this._trace=new A(this._peekContext())}function f(t,e){if(D(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=w(t);N.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),N.notEnumerableProp(t,"__stackCleaned__",!0)}}}function p(t,e,n,r){if(void 0===t&&null!==e&&X.longStackTraces&&X.warnings){var i="a promise was created in a "+n+" handler but was not returned from it";r._warn(i,!0,e)}}function d(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),v(n)}function v(t,n,r){if(X.warnings){var i,o=new R(t);if(n)r._attachExtraTrace(o);else if(X.longStackTraces&&(i=e._peekContext()))i.attachExtraTrace(o);else{var s=w(o);o.stack=s.message+"\n"+s.stack.join("\n")}x(o,"",!0)}}function _(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function m(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function g(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function y(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||H.test(r),o=i&&$(r);i&&!o&&(V&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function b(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||H.test(r))break}return n>0&&(e=e.slice(n)),e}function w(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?b(t):["    (No stack trace)"],{message:n,stack:y(e)}}function x(t,e,n){if("undefined"!=typeof console){var r;if(N.isObject(t)){var i=t.stack;r=e+q(i,t)}else r=e+String(t);"function"==typeof L?L(r,n):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}}function E(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(o){F.throwLater(o)}var s=!1;try{s=K(t,n,r)}catch(o){s=!0,F.throwLater(o)}var a=!1;if(G)try{a=G(t.toLowerCase(),{reason:n,promise:r})}catch(o){a=!0,F.throwLater(o)}s||i||a||"unhandledRejection"!==t||x(n,"Unhandled rejection ")}function k(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():N.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+T(e)+">, no stack trace)"}function T(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function S(){return"function"==typeof Q}function C(t){var e=t.match(J);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}function j(t,e){if(S()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),s=-1,a=-1,u=0;u<i.length;++u){var c=C(i[u]);if(c){n=c.fileName,s=c.line;break}}for(var u=0;u<o.length;++u){var c=C(o[u]);if(c){r=c.fileName,a=c.line;break}}0>s||0>a||!n||!r||n!==r||s>=a||($=function(t){if(M.test(t))return!0;var e=C(t);return e&&e.fileName===n&&s<=e.line&&e.line<=a?!0:!1})}}function A(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Q(this,A),e>32&&this.uncycle()}var P,I,L,O=e._getDomain,F=e._async,R=t("./errors").Warning,N=t("./util"),D=N.canAttachTrace,M=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,H=null,q=null,V=!1,z=!(0==N.env("BLUEBIRD_DEBUG")),U=!(0==N.env("BLUEBIRD_WARNINGS")||!z&&!N.env("BLUEBIRD_WARNINGS")),B=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!z&&!N.env("BLUEBIRD_LONG_STACK_TRACES"));e.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|2097152},e.prototype._ensurePossibleRejectionHandled=function(){0===(2097152&this._bitField)&&(this._setRejectionIsUnhandled(),F.invokeLater(this._notifyUnhandledRejection,this,void 0))},e.prototype._notifyUnhandledRejectionIsHandled=function(){E("rejectionHandled",P,void 0,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),E("unhandledRejection",I,t,this)}},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},e.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},e.prototype._warn=function(t,e,n){return v(t,e,n||this)},e.onPossiblyUnhandledRejection=function(t){var e=O();I="function"==typeof t?null===e?t:e.bind(t):void 0},e.onUnhandledRejectionHandled=function(t){var e=O();P="function"==typeof t?null===e?t:e.bind(t):void 0},e.longStackTraces=function(){if(F.haveItemsQueued()&&!X.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");!X.longStackTraces&&S()&&(X.longStackTraces=!0,e.prototype._captureStackTrace=h,e.prototype._attachExtraTrace=f,n.activateLongStackTraces(),F.disableTrampolineIfNecessary())},e.hasLongStackTraces=function(){return X.longStackTraces&&S()},e.config=function(t){if(t=Object(t),"longStackTraces"in t&&t.longStackTraces&&e.longStackTraces(),"warnings"in t&&(X.warnings=!!t.warnings),"cancellation"in t&&t.cancellation&&!X.cancellation){if(F.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");e.prototype._clearCancellationData=a,e.prototype._propagateFrom=u,e.prototype._onCancel=o,e.prototype._setOnCancel=s,e.prototype._attachCancellationCallback=i,e.prototype._execute=r,W=u,X.cancellation=!0}},e.prototype._execute=function(t,e,n){try{t(e,n)}catch(r){return r}},e.prototype._onCancel=function(){},e.prototype._setOnCancel=function(t){},e.prototype._attachCancellationCallback=function(t){},e.prototype._captureStackTrace=function(){},e.prototype._attachExtraTrace=function(){},e.prototype._clearCancellationData=function(){},e.prototype._propagateFrom=function(t,e){};var W=c,$=function(){return!1},J=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(A,Error),n.CapturedTrace=A,A.prototype.uncycle=function(){var t=this._length;if(!(2>t)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;t>r;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;t-1>a?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},A.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=w(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(y(i.stack.split("\n"))),i=i._parent;g(r),m(r),N.notEnumerableProp(t,"stack",_(n,r)),N.notEnumerableProp(t,"__stackCleaned__",!0)}};var G,Q=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():k(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,H=t,q=e;var n=Error.captureStackTrace;return $=function(t){return M.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return H=/@/,q=e,V=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(q=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?k(e):e.toString()},null):(H=t,q=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]),K=function(){if(N.isNode)return function(t,e,n){return"rejectionHandled"===t?process.emit(t,n):process.emit(t,e,n)};var t=!1,e=!0;try{var n=new self.CustomEvent("test");t=n instanceof CustomEvent}catch(r){}if(!t)try{var i=document.createEvent("CustomEvent");i.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(i)}catch(r){e=!1}e&&(G=function(e,n){var r;return t?r=new self.CustomEvent(e,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!1,!0,n)),r?!self.dispatchEvent(r):!1});var o={};return o.unhandledRejection="onunhandledRejection".toLowerCase(),o.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=o[t],i=self[r];return i?("rejectionHandled"===t?i.call(self,n):i.call(self,e,n),!0):!1}}();"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(L=function(t){console.warn(t)},N.isNode&&process.stderr.isTTY?L=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(L=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var X={warnings:U,longStackTraces:!1,cancellation:!1};return B&&e.longStackTraces(),{longStackTraces:function(){return X.longStackTraces},warnings:function(){return X.warnings},cancellation:function(){return X.cancellation},propagateFromFunction:function(){return W},boundValueFunction:function(){return l},checkForgottenReturns:p,setBounds:j,warn:v,deprecated:d,CapturedTrace:A}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype["return"]=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,e){return r(t,e)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(h(this,"message","string"==typeof r?r:e),h(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(h(this,"name","OperationalError"),h(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(h(this,"message",t.message),h(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5"),u=a.freeze,c=t("./util"),l=c.inherits,h=c.notEnumerableProp,f=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(_){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<m.length;++g)"function"==typeof Array.prototype[m[g]]&&(v.prototype[m[g]]=Array.prototype[m[g]]);a.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var y=0;v.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return y--,e},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),h(Error,"__BluebirdErrorTypes__",b)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},c=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},h=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},f=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:f,keys:a,names:a,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:h,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){this.finallyHandler=t}function i(t,e){return null!=t.cancelPromise?(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0):!1}function o(){return a.call(this,this.promise._target()._settledValue())}function s(t){return i(this,t)?void 0:(l.e=t,l)}function a(t){var a=this.promise,u=this.handler;if(!this.called){this.called=!0;var h=0===this.type?u.call(a._boundValue()):u.call(a._boundValue(),t);if(void 0!==h){var f=n(h,a);if(f instanceof e){if(null!=this.cancelPromise){if(f.isCancelled()){var p=new c("late cancellation observer");return a._attachExtraTrace(p),l.e=p,l}f.isPending()&&f._attachCancellationCallback(new r(this))}return f._then(o,s,void 0,this,void 0)}}}return a.isRejected()?(i(this),l.e=t,l):(i(this),t)}var u=t("./util"),c=e.CancellationError,l=u.errorObj;return r.prototype._resultCancelled=function(){i(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,{promise:this,handler:t,called:!1,cancelPromise:null,type:e},void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThrough(t,0,a,a)},e.prototype.tap=function(t){return this._passThrough(t,1,a)},a}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=p(n[o])(t);if(r._popContext(),s===f){r._pushContext();var a=e.reject(f.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function u(t,n,i,o){var s=this._promise=new e(r);s._captureStackTrace(),s._setOnCancel(this),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null}var c=t("./errors"),l=c.TypeError,h=t("./util"),f=h.errorObj,p=h.tryCatch,d=[];h.inherits(u,o),u.prototype._isResolved=function(){return null===this.promise},u.prototype._cleanup=function(){this._promise=this._generator=null},u.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator["return"];if(n)this._promise._pushContext(),t=p(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=p(this._generator["throw"]).call(this._generator,r),this._promise._popContext(),t===f&&t.e===r&&(t=null)}var i=this._promise;this._cleanup(),t===f?i._rejectCallback(t.e,!1):i.cancel()}},u.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},u.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},u.prototype.promise=function(){return this._promise},u.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},u.prototype._continue=function(t){var n=this._promise;if(t===f)return this._cleanup(),n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=a(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var s=o._bitField;0===(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&s)?this._promiseFulfilled(o._value()):0!==(16777216&s)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=u,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),s=o.promise();return o._generator=e,o._promiseFulfilled(void 0),s}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+h.classString(t));d.push(t)},e.spawn=function(t){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new u(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,this._init$(void 0,-2)}function u(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+l.classString(e));var o="object"==typeof n&&null!==n?n.concurrency:0;return o="number"==typeof o&&isFinite(o)&&o>=1?o:0,new a(t,e,o,i).promise()}var c=e._getDomain,l=t("./util"),h=l.tryCatch,f=l.errorObj,p=[];l.inherits(a,n),a.prototype._init=function(){},a.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),a=this._preservedValues,u=this._limit;if(0>n){if(n=-1*n-1,r[n]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==a&&(a[n]=t);var c=this._promise,l=this._callback,p=c._boundValue();c._pushContext();var d=h(l).call(p,t,n,o),v=c._popContext();if(s.checkForgottenReturns(d,v,null!==a?"Promise.filter":"Promise.map",c),d===f)return this._reject(d.e),!0;var _=i(d,this._promise);if(_ instanceof e){_=_._target();var m=_._bitField;if(0===(50397184&m))return u>=1&&this._inFlight++,r[n]=_,_._proxy(this,-1*(n+1)),!1;if(0===(33554432&m))return 0!==(16777216&m)?(this._reject(_._reason()),!0):(this._cancel(),!0);d=_._value()}r[n]=d}var g=++this._totalResolved;return g>=o?(null!==a?this._filter(r,a):this._resolve(r),!0):!1},a.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},a.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;n>o;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},a.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return u(this,t,e,null)},e.map=function(t,e,n,r){return u(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var s=t("./util"),a=s.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+s.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=a(t).apply(this,arguments),s=r._popContext();return o.checkForgottenReturns(i,s,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t){if("function"!=typeof t)return i("expecting a function but got "+s.classString(t));var r=new e(n);r._captureStackTrace(),
r._pushContext();var u;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];u=s.isArray(c)?a(t).apply(l,c):a(t).call(l,c)}else u=a(t)();var h=r._popContext();return o.checkForgottenReturns(u,h,"Promise.try",r),r._resolveFromSyncValue(u),r},e.prototype._resolveFromSyncValue=function(t){t===s.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];h.test(o)||(e[o]=t[o])}return e}return s.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}var s=t("./util"),a=s.maybeWrapAsError,u=t("./errors"),c=u.OperationalError,l=t("./es5"),h=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=a(e).call(n._boundValue(),t);i===u&&s.throwLater(i.e)}var o=t("./util"),s=e._async,a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,e,n){"use strict";e.exports=function(){function e(){}function n(t,e){if("function"!=typeof e)throw new m("expecting a function but got "+f.classString(e));if(t.constructor!==r)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function r(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==y&&(n(this,t),this._resolveFromExecutor(t)),this._promiseCreated()}function i(t){this.promise._resolveCallback(t)}function o(t){this.promise._rejectCallback(t,!1)}function s(t){var e=new r(y);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var a,u=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},c=function(){return new r.PromiseInspection(this._target())},l=function(t){return r.reject(new m(t))},h={},f=t("./util");a=f.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},f.notEnumerableProp(r,"_getDomain",a);var p=t("./es5"),d=t("./async"),v=new d;p.defineProperty(r,"_async",{value:v});var _=t("./errors"),m=r.TypeError=_.TypeError;r.RangeError=_.RangeError;var g=r.CancellationError=_.CancellationError;r.TimeoutError=_.TimeoutError,r.OperationalError=_.OperationalError,r.RejectionError=_.OperationalError,r.AggregateError=_.AggregateError;var y=function(){},b={},w={},x=t("./thenables")(r,y),E=t("./promise_array")(r,y,x,l,e),k=t("./context")(r),T=k.create,S=t("./debuggability")(r,k),C=(S.CapturedTrace,t("./finally")(r,x)),j=t("./catch_filter")(w),A=t("./nodeback"),P=f.errorObj,I=f.tryCatch;return r.prototype.toString=function(){return"[object Promise]"},r.prototype.caught=r.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;e-1>n;++n){var o=arguments[n];if(!f.isObject(o))return l("expecting an object but got "+f.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,j(r,t,this))}return this.then(void 0,t)},r.prototype.reflect=function(){return this._then(c,c,void 0,this,void 0)},r.prototype.then=function(t,e){if(S.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+f.classString(t);arguments.length>1&&(n+=", "+f.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},r.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},r.prototype.spread=function(t){return"function"!=typeof t?l("expecting a function but got "+f.classString(t)):this.all()._then(t,void 0,void 0,b,void 0)},r.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},r.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},r.prototype.error=function(t){return this.caught(f.originatesFromRejection,t)},r.is=function(t){return t instanceof r},r.fromNode=r.fromCallback=function(t){var e=new r(y),n=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,i=I(t)(A(e,n));return i===P&&e._rejectCallback(i.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},r.all=function(t){return new E(t).promise()},r.cast=function(t){var e=x(t);return e instanceof r||(e=new r(y),e._setFulfilled(),e._rejectionHandler0=t),e},r.resolve=r.fulfilled=r.cast,r.reject=r.rejected=function(t){var e=new r(y);return e._captureStackTrace(),e._rejectCallback(t,!0),e},r.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+f.classString(t));var e=v._schedule;return v._schedule=t,e},r.prototype._then=function(t,e,n,i,o){var s=void 0!==o,u=s?o:new r(y),c=this._target(),l=c._bitField;s||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===i&&0!==(2097152&this._bitField)&&(i=0!==(50397184&l)?this._boundValue():c===this?void 0:this._boundTo));var h=a();if(0!==(50397184&l)){var f,p,d=c._settlePromiseCtx;0!==(33554432&l)?(p=c._rejectionHandler0,f=t):0!==(16777216&l)?(p=c._fulfillmentHandler0,f=e,c._unsetRejectionIsUnhandled()):(d=c._settlePromiseLateCancellationObserver,p=new g("late cancellation observer"),c._attachExtraTrace(p),f=e),v.invoke(d,c,{handler:null===h?f:"function"==typeof f&&h.bind(f),promise:u,receiver:i,value:p})}else c._addCallbacks(t,e,u,i,h);return u},r.prototype._length=function(){return 65535&this._bitField},r.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},r.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},r.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},r.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField},r.prototype._setRejected=function(){this._bitField=16777216|this._bitField},r.prototype._setFollowing=function(){this._bitField=67108864|this._bitField},r.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},r.prototype._isFinal=function(){return(4194304&this._bitField)>0},r.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},r.prototype._setCancelled=function(){this._bitField=65536|this._bitField},r.prototype._setAsyncGuaranteed=function(){this._bitField=134217728|this._bitField},r.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==h)return void 0===e&&this._isBound()?this._boundValue():e},r.prototype._promiseAt=function(t){return this[4*t-4+2]},r.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},r.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},r.prototype._boundValue=function(){},r.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=h),this._addCallbacks(e,n,r,i,null)},r.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=h),this._addCallbacks(n,r,i,o,null)},r.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e));else{var s=4*o-4;this[s+2]=n,this[s+3]=r,"function"==typeof t&&(this[s+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[s+1]=null===i?e:i.bind(e))}return this._setLength(o+1),o},r.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},r.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(u(),!1);var n=x(t,this);if(!(n instanceof r))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target(),o=i._bitField;if(0===(50397184&o)){var s=this._length();s>0&&i._migrateCallback0(this);for(var a=1;s>a;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&o))this._fulfill(i._value());else if(0!==(16777216&o))this._reject(i._reason());else{var c=new g("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}},r.prototype._rejectCallback=function(t,e,n){var r=f.ensureErrorObject(t),i=r===t;if(!i&&!n&&S.warnings()){var o="a promise was rejected with a non-error: "+f.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,e?i:!1),this._reject(t)},r.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},r.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===b?n&&"number"==typeof n.length?o=I(t).apply(this._boundValue(),n):(o=P,o.e=new m("cannot .spread() a non-array: "+f.classString(n))):o=I(t).call(e,n);var s=r._popContext();if(i=r._bitField,0===(65536&i))if(o===w)r._reject(n);else if(o===P||o===r){var a=o===r?u():o.e;r._rejectCallback(a,!1)}else S.checkForgottenReturns(o,s,"",r),r._resolveCallback(o)}},r.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},r.prototype._followee=function(){return this._rejectionHandler0},r.prototype._setFollowee=function(t){this._rejectionHandler0=t},r.prototype._settlePromise=function(t,n,i,o){var s=t instanceof r,a=this._bitField,u=0!==(134217728&a);0!==(65536&a)?(s&&t._invokeInternalOnCancel(),n===C?(i.cancelPromise=t,I(n).call(i,o)===P&&t._reject(P.e)):n===c?t._fulfill(c.call(i)):i instanceof e?i._promiseCancelled(t):s||t instanceof E?t._cancel():i.cancel()):"function"==typeof n?s?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(n,i,o,t)):n.call(i,o,t):i instanceof e?i._isResolved()||(0!==(33554432&a)?i._promiseFulfilled(o,t):i._promiseRejected(o,t)):s&&(u&&t._setAsyncGuaranteed(),0!==(33554432&a)?t._fulfill(o):t._reject(o))},r.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,i=t.receiver,o=t.value;"function"==typeof e?n instanceof r?this._settlePromiseFromHandler(e,i,o,n):e.call(i,o,n):n instanceof r&&n._reject(o)},r.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},r.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},r.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},r.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=u();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():v.settlePromises(this))}},r.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?v.fatalError(t,f.isNode):void((65535&e)>0?0!==(134217728&e)?this._settlePromises():v.settlePromises(this):this._ensurePossibleRejectionHandled())},r.prototype._fulfillPromises=function(t,e){for(var n=1;t>n;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},r.prototype._rejectPromises=function(t,e){for(var n=1;t>n;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},r.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},r.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},r.defer=r.pending=function(){S.deprecated("Promise.defer","new Promise");var t=new r(y);return{promise:t,resolve:i,reject:o}},f.notEnumerableProp(r,"_makeSelfResolutionError",u),t("./method")(r,y,x,l,S),t("./bind")(r,y,x,S),t("./cancel")(r,E,l,S),t("./direct_resolve")(r),t("./synchronous_inspection")(r),t("./join")(r,E,x,y,S),r.Promise=r,t("./map.js")(r,E,l,x,y,S),t("./using.js")(r,l,x,T,y,S),t("./timers.js")(r,y),t("./generators.js")(r,l,y,x,e,S),t("./nodeify.js")(r),t("./call_get.js")(r),t("./props.js")(r,E,x,l),t("./race.js")(r,y,x,l),t("./reduce.js")(r,E,l,x,y,S),t("./settle.js")(r,E,S),t("./some.js")(r,E,l),t("./promisify.js")(r,y),t("./any.js")(r),t("./each.js")(r,y),t("./filter.js")(r,y),f.toFastProperties(r),f.toFastProperties(r.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new r(y)),S.setBounds(d.firstLineError,f.lastLineError),r}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t){switch(t){case-2:return[];case-3:return{}}}function a(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var u=t("./util");u.isArray;return u.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function c(t,n){var o=r(this._values,this._promise);if(o instanceof e){o=o._target();var a=o._bitField;if(this._values=o,0===(50397184&a))return this._promise._setAsyncGuaranteed(),o._then(c,this._reject,void 0,this,n);if(0===(33554432&a))return 0!==(16777216&a)?this._reject(o._reason()):this._cancel();o=o._value()}if(o=u.asArray(o),null===o){var l=i("expecting an array or an iterable object but got "+u.classString(o)).reason();return void this._promise._rejectCallback(l,!1)}return 0===o.length?void(-5===n?this._resolveEmptyArray():this._resolve(s(n))):void this._iterate(o)},a.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,s=null,a=0;n>a;++a){var u=r(t[a],i);u instanceof e?(u=u._target(),s=u._bitField):s=null,o?null!==s&&u.suppressUnhandledRejections():null!==s?0===(50397184&s)?(u._proxy(this,a),this._values[a]=u):o=0!==(33554432&s)?this._promiseFulfilled(u._value(),a):0!==(16777216&s)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(u,a)}o||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},a.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},a.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(t){return t},a}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!x.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,b);return r?i(r):!1}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function a(t,e,n,r){for(var a=p.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],h=t[l],f=r===E?!0:E(l,h,t);"function"!=typeof h||i(h)||o(t,l,e)||!r(l,h,t,f)||u.push(l,h)}return s(u,e,n),u}function u(t,r,i,o,s,a){function u(){var i=r;r===f&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof l&&this!==c?this[l]:t,u=d(o,a);try{s.apply(i,v(arguments,u))}catch(h){o._rejectCallback(_(h),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),l=t;return"string"==typeof l&&(t=o),p.notEnumerableProp(u,"__isPromisified__",!0),u}function c(t,e,n,r,i){for(var o=new RegExp(k(e)+"$"),s=a(t,e,o,n),u=0,c=s.length;c>u;u+=2){var l=s[u],h=s[u+1],d=l+e;if(r===T)t[d]=T(l,f,l,h,e,i);else{var v=r(h,function(){return T(l,f,l,h,e,i)});p.notEnumerableProp(v,"__isPromisified__",!0),t[d]=v}}return p.toFastProperties(t),t}function l(t,e,n){return T(t,e,void 0,t,null,n)}var h,f={},p=t("./util"),d=t("./nodeback"),v=p.withAppended,_=p.maybeWrapAsError,m=p.canEvaluate,g=t("./errors").TypeError,y="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],x=new RegExp("^(?:"+w.join("|")+")$"),E=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},k=function(t){return t.replace(/([$])/,"\\$")},T=m?h:u;e.promisify=function(t,e){if("function"!=typeof t)throw new g("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?f:e.context,o=!!e.multiArgs,s=l(t,n,o);return p.copyDescriptors(t,s,r),s},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=y);var i=e.filter;"function"!=typeof i&&(i=E);var o=e.promisifier;if("function"!=typeof o&&(o=T),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=p.inheritedDataKeys(t),a=0;a<s.length;++a){var u=t[s[a]];"constructor"!==s[a]&&p.isClass(u)&&(c(u.prototype,r,i,o,n),c(u,r,i,o,n))}return c(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==a&&t instanceof a)e=h(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;i>o;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function s(t){var n,s=r(t);return c(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var a,u=t("./util"),c=u.isObject,l=t("./es5");"function"==typeof Map&&(a=Map);var h=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),f=function(t){for(var e=new a,n=t.length/2|0,r=0;n>r;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};u.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=f(this._values);else{r={};for(var i=this.length(),o=0,s=this.length();s>o;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;i>o;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(t=s.asArray(t),null===t)return i("expecting an array or an iterable object but got "+s.classString(t));var c=new e(n);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,h=c._reject,f=0,p=t.length;p>f;++f){var d=t[f];(void 0!==d||f in t)&&e.cast(d)._then(l,h,void 0,c,null)}return c}var s=t("./util"),a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t,n,r,i){this.constructor$(t);var s=f();this._fn=null===s?n:s.bind(n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function u(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+p.classString(e));var o=new a(t,e,n,i);return o.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(t){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var a=r._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var f=e._getDomain,p=t("./util"),d=p.tryCatch;p.inherits(a,n),a.prototype._gotAccum=function(t){void 0!==this._eachValues&&t!==o&&this._eachValues.push(t)},a.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},a.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},a.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;i>r;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(u,u,void 0,n,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],29:[function(t,e,n){"use strict";var r,i=t("./util"),o=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};if(i.isNode&&"undefined"==typeof MutationObserver){var s=global.setImmediate,a=process.nextTick;r=i.isRecentNode?function(t){s.call(global,t)}:function(t){a.call(process,t)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?r="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:o:(r=function(t){var e=document.createElement("div"),n=new MutationObserver(t);return n.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},r.isStatic=!0);e.exports=r},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,s=t("./util");s.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length?(this._resolve(this._values),!0):!1},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||0>e)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util"),a=t("./errors").RangeError,u=t("./errors").AggregateError,c=s.isArray,l={};s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new u,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},s=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},a=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return s.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return a.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===c){r&&r._pushContext();var u=e.reject(i.e);return r&&r._popContext(),u}if("function"==typeof i){if(s(t)){var u=new e(n);return t._then(u._fulfill,u._reject,void 0,u,null),u}return a(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(e){return c.e=e,c}}function s(t){return h.call(t,"_promise0")}function a(t,r,i){function o(t){a&&(a._resolveCallback(t),a=null)}function s(t){a&&(a._rejectCallback(t,h,!0),a=null)}var a=new e(n),l=a;i&&i._pushContext(),a._captureStackTrace(),i&&i._popContext();var h=!0,f=u.tryCatch(r).call(t,o,s);return h=!1,
a&&f===c&&(a._rejectCallback(f.e,!0,!0),a=null),l}var u=t("./util"),c=u.errorObj,l=u.isObject,h={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){var n;n="string"!=typeof e?e instanceof Error?e:new s("operation timed out"):new s(e),o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._reject(n)}},u=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,r){var i;return void 0!==r?i=e.resolve(r)._then(u,null,null,t,void 0):(i=new e(n),setTimeout(function(){i._fulfill()},+t)),i._setAsyncGuaranteed(),i};e.prototype.delay=function(t){return c(t,this)},e.prototype.timeout=function(t,e){t=+t;var n=this.then(),o=setTimeout(function(){a(n,e)},t);return n._then(r,i,void 0,o,void 0)}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,s){function a(t){setTimeout(function(){throw t},0)}function u(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,n){function i(){if(s>=c)return l._fulfill();var o=u(t[s++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(h){return a(h)}if(o instanceof e)return o._then(i,a,null,null,null)}i()}var s=0,c=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function h(t,e,n){this.constructor$(t,e,n)}function f(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),v=t("./errors").TypeError,_=t("./util").inherits,m=d.errorObj,g=d.tryCatch;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(h,l),h.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,n=0;t>n;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(2>t)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,a=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,a=!1):(o=arguments,t--);for(var u=new p(t),h=0;t>h;++h){var v=o[h];if(l.isDisposer(v)){var _=v;v=v.promise(),v._setDisposable(_)}else{var y=r(v);y instanceof e&&(v=y._then(f,null,null,{resources:u,index:h},void 0))}u[h]=v}for(var b=new Array(u.length),h=0;h<b.length;++h)b[h]=e.resolve(u[h]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return m.e=n.error(),m;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}x._pushContext(),i=g(i);var r=a?i.apply(void 0,t):i(t),o=x._popContext();return s.checkForgottenReturns(r,o,"Promise.using",x),r}),x=w.lastly(function(){var t=new e.PromiseInspection(w);return c(u,t)});return u.promise=x,x._setOnCancel(u),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(t,e,n){"use strict";function r(){try{var t=S;return S=null,t.apply(this,arguments)}catch(e){return T.e=e,T}}function i(t){return S=t,r}function o(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function s(t){return"function"==typeof t||"object"==typeof t&&null!==t}function a(t){return o(t)?new Error(_(t)):t}function u(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;r>n;++n)i[n]=t[n];return i[n]=e,i}function c(t,e,n){if(!E.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function l(t,e,n){if(o(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return E.defineProperty(t,e,r),t}function h(t){throw t}function f(t){try{if("function"==typeof t){var e=E.names(t.prototype),n=E.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=A.test(t+"")&&E.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function p(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function d(t){return P.test(t)}function v(t,e,n){for(var r=new Array(t),i=0;t>i;++i)r[i]=e+i+n;return r}function _(t){try{return t+""}catch(e){return"[no string representation]"}}function m(t){try{l(t,"isOperational",!0)}catch(e){}}function g(t){return null==t?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function y(t){return t instanceof Error&&E.propertyIsWritable(t,"stack")}function b(t){return{}.toString.call(t)}function w(t,e,n){for(var r=E.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{E.defineProperty(e,o,E.getDescriptor(t,o))}catch(s){}}}function x(t,e){return F?process.env[t]:e}var E=t("./es5"),k="undefined"==typeof navigator,T={e:{}},S,C=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},j=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(E.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}t=E.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),A=/this\s*\.\s*\S+\s*=/,P=/^[a-z$_][a-z$_0-9]*$/i,I=function(){return"stack"in new Error?function(t){return y(t)?t:new Error(_(t))}:function(t){if(y(t))return t;try{throw new Error(_(t))}catch(e){return e}}}(),L=function(t){return E.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var O="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};L=function(t){return E.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?O(t):null}}var F="undefined"!=typeof process&&"[object process]"===b(process).toLowerCase(),R={isClass:f,isIdentifier:d,inheritedDataKeys:j,getDataPropertyOrDefault:c,thrower:h,isArray:E.isArray,asArray:L,notEnumerableProp:l,isPrimitive:o,isObject:s,canEvaluate:k,errorObj:T,tryCatch:i,inherits:C,withAppended:u,maybeWrapAsError:a,toFastProperties:p,filledRange:v,toString:_,canAttachTrace:y,ensureErrorObject:I,originatesFromRejection:g,markAsOriginatingFromRejection:m,classString:b,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:F,env:x};R.isRecentNode=R.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),R.isNode&&R.toFastProperties(process);try{throw new Error}catch(N){R.lastLineError=N}e.exports=R},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||function(t){"use strict";function e(t){this._watched=[],this._listener=t}function n(t){!function n(){var r=t.takeRecords();r.length&&t._listener(r,t),t._timeout=setTimeout(n,e._period)}()}function r(e){var n={type:null,target:null,addedNodes:[],removedNodes:[],previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};for(var r in e)p(n,r)&&e[r]!==t&&(n[r]=e[r]);return n}function i(t,e){var n=a(t,e);return function(r){var i,u=r.length;e.attr&&n.attr&&o(r,t,n.attr,e.afilter),(e.kids||e.descendents)&&(i=s(r,t,n,e)),(i||r.length!==u)&&(n=a(t,e))}}function o(t,e,n,i){for(var o,s,a={},u=e.attributes,c=u.length;c--;)o=u[c],s=o.name,(!i||p(i,s))&&(o.value!==n[s]&&t.push(r({type:"attributes",target:e,attributeName:s,oldValue:n[s],attributeNamespace:o.namespaceURI})),a[s]=!0);for(s in n)a[s]||t.push(r({target:e,type:"attributes",attributeName:s,oldValue:n[s]}))}function s(e,n,i,s){function a(t,n,i,a,u){for(var c,h,f,p=t.length-1,d=-~((p-u)/2);f=t.pop();)c=i[f.i],h=a[f.j],s.kids&&d&&Math.abs(f.i-f.j)>=p&&(e.push(r({type:"childList",target:n,addedNodes:[c],removedNodes:[c],nextSibling:c.nextSibling,previousSibling:c.previousSibling})),d--),s.attr&&h.attr&&o(e,c,h.attr,s.afilter),s.charData&&3===c.nodeType&&c.nodeValue!==h.charData&&e.push(r({type:"characterData",target:c})),s.descendents&&l(c,h)}function l(n,i){for(var p,d,v,_,m,g,y,b=n.childNodes,w=i.kids,x=b.length,E=w?w.length:0,k=0,T=0,S=0;x>T||E>S;)g=b[T],m=w[S],y=m&&m.node,g===y?(s.attr&&m.attr&&o(e,g,m.attr,s.afilter),s.charData&&m.charData!==t&&g.nodeValue!==m.charData&&e.push(r({type:"characterData",target:g})),d&&a(d,n,b,w,k),s.descendents&&(g.childNodes.length||m.kids&&m.kids.length)&&l(g,m),T++,S++):(h=!0,p||(p={},d=[]),g&&(p[v=c(g)]||(p[v]=!0,-1===(_=u(w,g,S))?s.kids&&(e.push(r({type:"childList",target:n,addedNodes:[g],nextSibling:g.nextSibling,previousSibling:g.previousSibling})),k++):d.push({i:T,j:_})),T++),y&&y!==b[T]&&(p[v=c(y)]||(p[v]=!0,-1===(_=f(b,y,T))?s.kids&&(e.push(r({type:"childList",target:i.node,removedNodes:[y],nextSibling:w[S+1],previousSibling:w[S-1]})),k--):d.push({i:_,j:S})),S++));d&&a(d,n,b,w,k)}var h;return l(n,i),h}function a(t,e){var n=!0;return function r(t){var i={node:t};return!e.charData||3!==t.nodeType&&8!==t.nodeType?(e.attr&&n&&1===t.nodeType&&(i.attr=h(t.attributes,function(t,n){return(!e.afilter||e.afilter[n.name])&&(t[n.name]=n.value),t},{})),n&&(e.kids||e.charData||e.attr&&e.descendents)&&(i.kids=l(t.childNodes,r)),n=e.descendents):i.charData=t.nodeValue,i}(t)}function u(t,e,n){return f(t,e,n,d("node"))}function c(t){try{return t.id||(t[_]=t[_]||v++)}catch(e){try{return t.nodeValue}catch(n){return v++}}}function l(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r,t);return n}function h(t,e,n){for(var r=0;r<t.length;r++)n=e(n,t[r],r,t);return n}function f(t,e,n,r){for(;n<t.length;n++)if((r?t[n][r]:t[n])===e)return n;return-1}function p(e,n){return e[n]!==t}function d(t){return t}e._period=30,e.prototype={observe:function(t,e){for(var r={attr:!!(e.attributes||e.attributeFilter||e.attributeOldValue),kids:!!e.childList,descendents:!!e.subtree,charData:!(!e.characterData&&!e.characterDataOldValue)},o=this._watched,s=0;s<o.length;s++)o[s].tar===t&&o.splice(s,1);e.attributeFilter&&(r.afilter=h(e.attributeFilter,function(t,e){return t[e]=!0,t},{})),o.push({tar:t,fn:i(t,r)}),this._timeout||n(this)},takeRecords:function(){for(var t=[],e=this._watched,n=0;n<e.length;n++)e[n].fn(t);return t},disconnect:function(){this._watched=[],clearTimeout(this._timeout),this._timeout=null}};var v=1,_="mo_id";return e}(void 0),function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=o(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(1)["default"],s=n(4)["default"],a=n(64)["default"],u=n(68)["default"],c=n(79)["default"],l=n(82)["default"],h=n(84)["default"],f=n(94)["default"],p=n(98)["default"],d=n(101)["default"],v=n(105)["default"],_=n(108)["default"];!function(){function t(t,e,n){this.name="L10nError",this.message=t,this.id=e,this.lang=n}function e(e,n){return new s(function(r,i){var o=new XMLHttpRequest;o.overrideMimeType&&o.overrideMimeType(e),o.open("GET",n,!0),"application/json"===e&&(o.responseType="json"),o.addEventListener("load",function(e){200===e.target.status||0===e.target.status?r(e.target.response||e.target.responseText):i(new t("Not found: "+n))}),o.addEventListener("error",i),o.addEventListener("timeout",i);try{o.send(null)}catch(s){if("NS_ERROR_FILE_NOT_FOUND"!==s.name)throw s;i(new t("Not found: "+n))}})}function n(t,e,n){var r=e.replace("{locale}",n.code),i=e.endsWith(".json")?"json":"text";return yt[n.src](n.code,t,r,i)}function m(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];var o=r.shift();t["*"]&&t["*"].slice().forEach(function(t){return t.apply(e,r)}),t[o]&&t[o].slice().forEach(function(t){return t.apply(e,r)})}function g(t,e,n){e in t||(t[e]=[]),t[e].push(n)}function y(t,e,n){var r=t[e],i=r.indexOf(n);-1!==i&&r.splice(i,1)}function b(t,e){a(this.ctxs.keys()).forEach(function(n){return n.emit(t,e)})}function w(t,e){var n=e.value;if("string"==typeof n)if(wt.test(n)){var r=t.ownerDocument.createElement("template");r.innerHTML=n,x(t,r.content)}else t.textContent=n;for(var i in e.attrs){var o=C(i);k({name:o},t)&&t.setAttribute(o,e.attrs[i])}}function x(t,e){for(var n=e.ownerDocument.createDocumentFragment(),r=void 0,i=void 0,o=void 0;o=e.childNodes[0];)if(e.removeChild(o),o.nodeType!==o.TEXT_NODE){var s=S(o),a=T(t,o,s);if(a)x(a,o),n.appendChild(a);else if(E(o)){var u=o.ownerDocument.createElement(o.nodeName);x(u,o),n.appendChild(u)}else n.appendChild(e.ownerDocument.createTextNode(o.textContent))}else n.appendChild(o);if(t.textContent="",t.appendChild(n),e.attributes)for(r=0,i;i=e.attributes[r];r++)k(i,t)&&t.setAttribute(i.name,i.value)}function E(t){return-1!==xt.elements.indexOf(t.tagName.toLowerCase())}function k(t,e){var n=t.name.toLowerCase(),r=e.tagName.toLowerCase();if(-1!==xt.attributes.global.indexOf(n))return!0;if(!xt.attributes[r])return!1;if(-1!==xt.attributes[r].indexOf(n))return!0;if("input"===r&&"value"===n){var i=e.type.toLowerCase();if("submit"===i||"button"===i||"reset"===i)return!0}return!1}function T(t,e,n){for(var r=0,i=0,o=void 0;o=t.children[i];i++)if(o.nodeType===o.ELEMENT_NODE&&o.tagName===e.tagName){if(r===n)return o;r++}return null}function S(t){for(var e=0,n=void 0;n=t.previousElementSibling;)n.tagName===t.tagName&&e++;return e}function C(t){return"ariaValueText"===t?"aria-valuetext":t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).replace(/^-/,"")}function j(t){return Array.prototype.map.call(t.querySelectorAll('link[rel="localization"]'),function(t){return t.getAttribute("href")})}function A(t,e,n){t.setAttribute("data-l10n-id",e),n&&t.setAttribute("data-l10n-args",JSON.stringify(n))}function P(t){return{id:t.getAttribute("data-l10n-id"),args:JSON.parse(t.getAttribute("data-l10n-args"))}}function I(t){var e=a(t.querySelectorAll("[data-l10n-id]"));return"function"==typeof t.hasAttribute&&t.hasAttribute("data-l10n-id")&&e.push(t),e}function L(t,e,n){for(var r=new u,i=n,o=Array.isArray(i),s=0,i=o?i:c(i);;){var l;if(o){if(s>=i.length)break;l=i[s++]}else{if(s=i.next(),s.done)break;l=s.value}var h=l;switch(h.type){case"attributes":r.add(h.target);break;case"childList":for(var f=h.addedNodes,p=Array.isArray(f),d=0,f=p?f:c(f);;){var v;if(p){if(d>=f.length)break;v=f[d++]}else{if(d=f.next(),d.done)break;v=d.value}var _=v;_.nodeType===_.ELEMENT_NODE&&(_.childElementCount?I(_).forEach(r.add.bind(r)):_.hasAttribute("data-l10n-id")&&r.add(_))}}}0!==r.size&&R(t,e,a(r))}function O(t,e,n){return R(t,e,I(n))}function F(t,e,n){var r=n.map(function(t){var e=t.getAttribute("data-l10n-id"),n=t.getAttribute("data-l10n-args");return n?[e,JSON.parse(n.replace(Et,function(t){return kt[t]}))]:e});return t._resolveEntities(e,r)}function R(t,e,n){return F(t,e,n).then(function(e){return N(t,n,e)})}function N(t,e,n){t._disconnect();for(var r=0;r<e.length;r++)w(e[r],n[r]);t._observe()}function D(){return"loading"!==document.readyState?s.resolve():new s(function(t){document.addEventListener("readystatechange",function e(){document.removeEventListener("readystatechange",e),t()})})}function M(t){var e=t.split("-")[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"}function H(t,e){return{getName:function(){return t._interactive.then(function(t){return t.method("getName",e)})},processString:function(n){return t._interactive.then(function(t){return t.method("processString",e,n)})}}}function q(t,e){return t._observe(),e.method("registerView",e.id,j(t._doc.head)).then(function(){return e})}function V(t){var e=this;return this._interactive.then(function(t){return t.method("resolvedLanguages")}).then(function(n){return L(e,n,t)})}function z(t,e){var n=t._doc.documentElement;if(St.has(n))return O(t,e,n).then(function(){return W(n,e)});var r=e[0].code===n.getAttribute("lang")?s.resolve():O(t,e,n).then(function(){return B(n,e)});return r.then(function(){U(n,e),St.set(n,!0)})}function U(t,e){var n=e.map(function(t){return t.code});t.setAttribute("langs",n.join(" "))}function B(t,e){var n=e[0].code;t.setAttribute("lang",n),t.setAttribute("dir",M(n))}function W(t,e){B(t,e),U(t,e),t.parentNode.dispatchEvent(new CustomEvent("DOMRetranslated",{bubbles:!1,cancelable:!1}))}function $(e,n,r,i){if("string"==typeof i)return[{},i];if(Nt.has(i))throw new t("Cyclic reference detected");Nt.add(i);var o=void 0;try{o=X({},e,n,r,i.value,i.index)}finally{Nt["delete"](i)}return o}function J(e,n,r,i){if(Lt.indexOf(i)>-1)return[{},e._getMacro(n,i)];if(r&&r.hasOwnProperty(i)){if("string"==typeof r[i]||"number"==typeof r[i]&&!isNaN(r[i]))return[{},r[i]];throw new t("Arg must be a string or a number: "+i)}if("__proto__"===i)throw new t("Illegal id: "+i);var o=e._getEntity(n,i);if(o)return $(e,n,r,o);throw new t("Unknown reference: "+i)}function G(e,n,r,i,o){var s=void 0,a=void 0;try{var u=J(n,r,i,o);s=u[0],a=u[1]}catch(c){return[{error:c},Ft+"{{ "+o+" }}"+Rt]}if("number"==typeof a){var l=n._getNumberFormatter(r);return[s,l.format(a)]}if("string"==typeof a){if(a.length>=Ot)throw new t("Too many characters in placeable ("+a.length+", max allowed is "+Ot+")");return[s,Ft+a+Rt]}return[{},Ft+"{{ "+o+" }}"+Rt]}function Q(t,e,n,r,i){return i.reduce(function(i,o){var s=i[0],a=i[1];if("string"==typeof o)return[s,a+o];var u=G(t,e,n,r,o.name),c=u[1];return[s,a+c]},[t,""])}function K(t,e,n,r,i){var o=void 0;o="call"===i[0].type&&"prop"===i[0].expr.type&&"cldr"===i[0].expr.expr.name?"plural":i[0].name;var s=J(t,e,n,o)[1];if("function"!=typeof s)return s;var a=i[0].args?J(t,e,n,i[0].args[0].name)[1]:void 0;if("plural"===o){if(0===a&&"zero"in r)return"zero";if(1===a&&"one"in r)return"one";if(2===a&&"two"in r)return"two"}return s(a)}function X(e,n,r,i,o,s){var a=!0;t:for(;a;){var u=e,c=n,l=r,h=i,f=o,p=s;if(a=!1,!f)return[u,f];if("string"==typeof f||"boolean"==typeof f||"number"==typeof f)return[u,f];if(Array.isArray(f))return Q(u,c,l,h,f);if(p){var d=K(c,l,h,f,p);if(d in f){e=u,n=c,r=l,i=h,o=f[d],s=void 0,a=!0,d=void 0;continue t}}var v=f.__default||"other";if(!(v in f))throw new t("Unresolvable value");e=u,n=c,r=l,i=h,o=f[v],s=void 0,a=!0,d=v=void 0}}function Z(t,e){return-1!==e.indexOf(t)}function Y(t,e,n){return typeof t==typeof e&&t>=e&&n>=t}function tt(t){var e=Dt[t.replace(/-.*$/,"")];return e in Mt?Mt[e]:function(){return"other"}}function et(e,n,r){var i=this,o=new u;return e.forEach(function(t,e){if(!r||void 0===r[e]){var s=Array.isArray(t)?t[0]:t;o.add(s),r[e]=n===i._formatValue?s:{value:s,attrs:null}}}),this._env.emit("notfounderror",new t('"'+a(o).join(", ")+'" not found in any language',o),this),r}function nt(t,e){if("string"==typeof t)return e(t);var n=o(null);if(t.value&&(n.value=rt(t.value,e)),t.index&&(n.index=t.index),t.attrs){n.attrs=o(null);for(var r in t.attrs)n.attrs[r]=nt(t.attrs[r],e)}return n}function rt(t,e){if("string"==typeof t)return e(t);if(t.type)return t;for(var n=Array.isArray(t)?[]:o(null),r=v(t),i=0,s=void 0;s=r[i];i++)n[s]=rt(t[s],e);return n}function it(t,e){var n=null;return function(){if(n)return n;var r=/[a-zA-Z]/g,i=/[aeiouAEIOU]/g,o=/[^\W0-9_]+/g,s=/(%[EO]?\w|\{\s*.+?\s*\}|&[#\w]+;|<\s*.+?\s*>)/,a={"fr-x-psaccent":"ȦƁƇḒḖƑƓĦĪĴĶĿḾȠǾƤɊŘŞŦŬṼẆẊẎẐ[\\]^_`ȧƀƈḓḗƒɠħīĵķŀḿƞǿƥɋřşŧŭṽẇẋẏẑ","ar-x-psbidi":"∀ԐↃpƎɟפHIſӼ˥WNOԀÒᴚS⊥∩ɅＭXʎZ[\\]ᵥ_,ɐqɔpǝɟƃɥıɾʞʅɯuodbɹsʇnʌʍxʎz"},u={"fr-x-psaccent":function(t){return t.replace(i,function(t){return t+t.toLowerCase()})},"ar-x-psbidi":function(t){return t.replace(o,function(t){return"‮"+t+"‬"})}},c=function(t,e){return e.replace(r,function(e){return t.charAt(e.charCodeAt(0)-65)})},l=function(e){return c(a[t],u[t](e))},h=function(t,e){if(!e)return e;var n=e.split(s),r=n.map(function(e){return s.test(e)?e:t(e)});return r.join("")};return n={name:l(e),process:function(t){return h(l,t)}}}}function ot(t,e,n){var r=a(e).some(function(t){var e=(t[0],t[1]);return e.has(n)});r||t.forEach(function(e,r){return r.startsWith(n)?t["delete"](r):null})}function st(t,e){return e.lang=t,e}function at(t,e,n){for(var r=void 0,i=0;i<n.length;i++){var o=n[i];if(-1!==e.indexOf(o)){r=o;break}}return r&&r!==t?[r,t]:[t]}function ut(t){for(var e=o(null),n=null,r=null,i=t.querySelectorAll('meta[name="availableLanguages"],meta[name="defaultLanguage"],meta[name="appVersion"]'),s=i,a=Array.isArray(s),u=0,s=a?s:c(s);;){var l;if(a){if(u>=s.length)break;l=s[u++]}else{if(u=s.next(),u.done)break;l=u.value}var h=l,f=h.getAttribute("name"),p=h.getAttribute("content").trim();switch(f){case"availableLanguages":e=ct(e,p);break;case"defaultLanguage":var d=lt(p),v=d[0],_=d[1];n=v,v in e||(e[v]=_);break;case"appVersion":r=p}}return{defaultLang:n,availableLangs:e,appVersion:r}}function ct(t,e){return e.split(",").reduce(function(t,e){var n=lt(e),r=n[0],i=n[1];return t[r]=i,t},t)}function lt(t){var e=t.trim().split(":"),n=e[0],r=e[1];return[n,parseInt(r)]}function ht(t,e,n,r,i,o,s){var a=v(r).concat(i||[]).concat(v(qt)),u=at(n,a,s),c=u.map(function(t){return{code:t,src:dt(e,r,i,t)}});return ft(o,u)||t(c),c}function ft(t,e){return t.length===e.length&&t.every(function(t,n){return t===e[n]})}function pt(t,e){for(var n=0,r=void 0;r=e[n];n++)if(r.target===t)return r;return null}function dt(t,e,n,r){if(n&&n[r]){var i=pt(t,n[r]);if(i&&(!(r in e)||parseInt(i.revision)>e[r]))return"extra"}return r in qt&&!(r in e)?"pseudo":"app"}function vt(){return navigator.mozApps&&navigator.mozApps.getAdditionalLanguages?navigator.mozApps.getAdditionalLanguages()["catch"](function(){return[]}):s.resolve([])}function _t(t,e){var n=this,r=this.languages||[];return this.languages=s.all([t,r]).then(function(t){var r=t[0],i=t[1];return ht(n.broadcast.bind(n,"translateDocument"),n.appVersion,n.defaultLanguage,n.availableLanguages,r,i,e)})}function mt(){function t(t){return e(t)}function e(t){var e,i=null,o={},s="";for(var u in t)switch(u){case"$v":i=t.$v;break;case"$x":s=n(t.$x);break;case"$i":e=t.$i.replace(/-/g,"_");break;default:o[u]=t[u]}return 0===v(o).length?"<"+e+s+" "+r(i,0)+">":"<"+e+s+" "+r(i,0)+"\n"+a(o)+">"}function n(t){return"plural"===t[0].v?"[ @cldr.plural($"+t[1]+") ]":void 0}function r(t,e){var n=!0;t:for(;n;){var r=t,a=e;if(n=!1,null===r)return"";if("string"==typeof r)return i(r);if(Array.isArray(r))return o(r);if("object"==typeof r){if(r.$o){t=r.$o,e=void 0,n=!0;continue t}return s(r,a)}}}function i(t){return t?'"'+t.replace(/"/g,'\\"')+'"':""}function o(t){for(var e='"',n=0;n<t.length;n++)e+="string"==typeof t[n]?t[n]:"{{ "+t[n].v.replace(/-/g,"_")+" }}";return e+'"'}function s(t,e){var n,i=[];for(var o in t)n="  "+o+": "+r(t[o]),i.push(n);var s=e?"  ":"";return"{\n"+s+i.join(",\n"+s)+"\n"+s+"}"}function a(t){var e="";for(var i in t)e+=t[i].$x?"  "+i+n(t[i].$x)+": "+r(t[i].$v,1)+"\n":"  "+i+": "+r(t[i],1)+"\n";return e}this.serialize=function(e){var n="";for(var r in e)n+=t(e[r])+"\n";return n}}function gt(t){this._getNumberFormatter=function(){return{format:function(t){return t}}},this._getEntity=function(e,n){return t[n]},this._getMacro=function(t,e){switch(e){case"plural":return tt(t.code);default:return}}}t.prototype=o(Error.prototype),t.prototype.constructor=t;var yt={extra:function(t,e,n,r){return navigator.mozApps.getLocalizationResource(t,e,n,r)},app:function(n,r,i,o){switch(o){case"text":return e("text/plain",i);case"json":return e("application/json",i);default:throw new t("Unknown file type: "+o)}}},bt=function(){function t(e){i(this,t),this.id=this,this.remote=e;var n={};this.on=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return g.apply(void 0,[n].concat(e))},this.emit=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return m.apply(void 0,[n].concat(e))}}return t.prototype.method=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];return(e=this.remote)[t].apply(e,r)},t}(),wt=/<|&#?\w+;/,xt={elements:["a","em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","ruby","rt","rp","bdi","bdo","span","br","wbr"],attributes:{global:["title","aria-label","aria-valuetext","aria-moz-hint"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]}},Et=/[&<>]/g,kt={"&":"&amp;","<":"&lt;",">":"&gt;"};"function"!=typeof NodeList||NodeList.prototype[l]||(NodeList.prototype[l]=Array.prototype[l]);var Tt={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:["data-l10n-id","data-l10n-args"]},St=new h,Ct=function(){function t(e,n){var r=this;i(this,t),this._doc=n,this.pseudo={"fr-x-psaccent":H(this,"fr-x-psaccent"),"ar-x-psbidi":H(this,"ar-x-psbidi")},this._interactive=D().then(function(){return q(r,e)});var o=new MutationObserver(V.bind(this));this._observe=function(){return o.observe(n,Tt)},this._disconnect=function(){return o.disconnect()};var s=function(t){return z(r,t)};e.on("translateDocument",s),this.ready=this._interactive.then(function(t){return t.method("resolvedLanguages")}).then(s)}return t.prototype.requestLanguages=function(t,e){return this._interactive.then(function(n){return n.method("requestLanguages",t,e)})},t.prototype._resolveEntities=function(t,e){return this._interactive.then(function(n){return n.method("resolveEntities",n.id,t,e)})},t.prototype.formatValue=function(t,e){return this._interactive.then(function(n){return n.method("formatValues",n.id,[[t,e]])}).then(function(t){return t[0]})},t.prototype.formatValues=function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return this._interactive.then(function(t){return t.method("formatValues",t.id,e)})},t.prototype.translateFragment=function(t){var e=this;return this._interactive.then(function(t){return t.method("resolvedLanguages")}).then(function(n){return O(e,n,t)})},t}();Ct.prototype.setAttributes=A,Ct.prototype.getAttributes=P;var jt=100,At={parse:function(t,e){return this._source=e,this._index=0,this._length=e.length,this.entries=o(null),this.emit=t,this.getResource()},getResource:function(){for(this.getWS();this._index<this._length;){try{this.getEntry()}catch(e){if(!(e instanceof t))throw e;if(this.getJunkEntry(),!this.emit)throw e}this._index<this._length&&this.getWS()}return this.entries},getEntry:function(){if("<"===this._source[this._index]){++this._index;var t=this.getIdentifier();return"["===this._source[this._index]?(++this._index,this.getEntity(t,this.getItemList(this.getExpression,"]"))):this.getEntity(t)}if(this._source.startsWith("/*",this._index))return this.getComment();throw this.error("Invalid entry")},getEntity:function(t,e){if(!this.getRequiredWS())throw this.error("Expected white space");var n=this._source[this._index],r=this.getValue(n,void 0===e),i=void 0;if(void 0===r){if(">"===n)throw this.error('Expected ">"');i=this.getAttributes()}else{var o=this.getRequiredWS();if(">"!==this._source[this._index]){if(!o)throw this.error('Expected ">"');i=this.getAttributes()}}if(++this._index,t in this.entries)throw this.error('Duplicate entry ID "'+t,"duplicateerror");i||e||"string"!=typeof r?this.entries[t]={value:r,attrs:i,index:e}:this.entries[t]=r},getValue:function(){var t=arguments.length<=0||void 0===arguments[0]?this._source[this._index]:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];switch(t){case"'":case'"':return this.getString(t,1);case"{":return this.getHash()}if(!e)throw this.error("Unknown value type")},getWS:function(){for(var t=this._source.charCodeAt(this._index);32===t||10===t||9===t||13===t;)t=this._source.charCodeAt(++this._index)},getRequiredWS:function(){for(var t=this._index,e=this._source.charCodeAt(t);32===e||10===e||9===e||13===e;)e=this._source.charCodeAt(++this._index);return this._index!==t},getIdentifier:function(){var t=this._index,e=this._source.charCodeAt(this._index);if(!(e>=97&&122>=e||e>=65&&90>=e||95===e))throw this.error("Identifier has to start with [a-zA-Z_]");for(e=this._source.charCodeAt(++this._index);e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e||95===e;)e=this._source.charCodeAt(++this._index);return this._source.slice(t,this._index)},getUnicodeChar:function(){for(var t=0;4>t;t++){var e=this._source.charCodeAt(++this._index);if(!(e>96&&103>e||e>64&&71>e||e>47&&58>e))throw this.error("Illegal unicode escape sequence")}return this._index++,String.fromCharCode(parseInt(this._source.slice(this._index-4,this._index),16))},stringRe:/"|'|{{|\\/g,getString:function(t,e){var n=[],r=0;this._index+=e;for(var i=this._index,o=i,s="";;){this.stringRe.lastIndex=this._index;var a=this.stringRe.exec(this._source);if(!a)throw this.error("Unclosed string literal");if('"'===a[0]||"'"===a[0]){if(a[0]!==t){this._index+=e;continue}this._index=a.index+e;break}if("{{"!==a[0]){if("\\"===a[0]){this._index=a.index+1;var u=this._source[this._index];if("u"===u)s+=this._source.slice(o,a.index)+this.getUnicodeChar();else if(u===t||"\\"===u)s+=this._source.slice(o,a.index)+u,this._index++;else{if(!this._source.startsWith("{{",this._index))throw this.error("Illegal escape sequence");s+=this._source.slice(o,a.index)+"{{",this._index+=2}o=this._index}}else{if(r>jt-1)throw this.error("Too many placeables, maximum allowed is "+jt);r++,(a.index>o||s.length>0)&&(n.push(s+this._source.slice(o,a.index)),s=""),this._index=a.index+2,this.getWS(),n.push(this.getExpression()),this.getWS(),this._index+=2,o=this._index}}return 0===n.length?s+this._source.slice(o,this._index-e):((this._index-e>o||s.length>0)&&n.push(s+this._source.slice(o,this._index-e)),n)},getAttributes:function(){for(var t=o(null);;){this.getAttribute(t);var e=this.getRequiredWS(),n=this._source.charAt(this._index);if(">"===n)break;if(!e)throw this.error('Expected ">"')}return t},getAttribute:function(t){var e=this.getIdentifier(),n=void 0;if("["===this._source[this._index]&&(++this._index,this.getWS(),n=this.getItemList(this.getExpression,"]")),this.getWS(),":"!==this._source[this._index])throw this.error('Expected ":"');++this._index,this.getWS();var r=this.getValue();if(e in t)throw this.error('Duplicate attribute "'+e,"duplicateerror");
n||"string"!=typeof r?t[e]={value:r,index:n}:t[e]=r},getHash:function(){var t=o(null);++this._index,this.getWS();for(var e=void 0;;){var n=this.getHashItem(),r=n[0],i=n[1],s=n[2];if(t[r]=i,s){if(e)throw this.error("Default item redefinition forbidden");e=r}this.getWS();var a=","===this._source[this._index];if(a&&(++this._index,this.getWS()),"}"===this._source[this._index]){++this._index;break}if(!a)throw this.error('Expected "}"')}return e&&(t.__default=e),t},getHashItem:function(){var t=!1;"*"===this._source[this._index]&&(++this._index,t=!0);var e=this.getIdentifier();if(this.getWS(),":"!==this._source[this._index])throw this.error('Expected ":"');return++this._index,this.getWS(),[e,this.getValue(),t]},getComment:function(){this._index+=2;var t=this._index,e=this._source.indexOf("*/",t);if(-1===e)throw this.error("Comment without a closing tag");this._index=e+2},getExpression:function(){for(var t=this.getPrimaryExpression();;){var e=this._source[this._index];if("."===e||"["===e)++this._index,t=this.getPropertyExpression(t,"["===e);else{if("("!==e)break;++this._index,t=this.getCallExpression(t)}}return t},getPropertyExpression:function(t,e){var n=void 0;if(e){if(this.getWS(),n=this.getExpression(),this.getWS(),"]"!==this._source[this._index])throw this.error('Expected "]"');++this._index}else n=this.getIdentifier();return{type:"prop",expr:t,prop:n,cmpt:e}},getCallExpression:function(t){return this.getWS(),{type:"call",expr:t,args:this.getItemList(this.getExpression,")")}},getPrimaryExpression:function(){var t=this._source[this._index];switch(t){case"$":return++this._index,{type:"var",name:this.getIdentifier()};case"@":return++this._index,{type:"glob",name:this.getIdentifier()};default:return{type:"id",name:this.getIdentifier()}}},getItemList:function(t,e){var n=[],r=!1;for(this.getWS(),this._source[this._index]===e&&(++this._index,r=!0);!r;){n.push(t.call(this)),this.getWS();var i=this._source.charAt(this._index);switch(i){case",":++this._index,this.getWS();break;case e:++this._index,r=!0;break;default:throw this.error('Expected "," or "'+e+'"')}}return n},getJunkEntry:function(){var t=this._index,e=this._source.indexOf("<",t),n=this._source.indexOf("/*",t);-1===e&&(e=this._length),-1===n&&(n=this._length);var r=Math.min(e,n);this._index=r},error:function(e){var n=arguments.length<=1||void 0===arguments[1]?"parsererror":arguments[1],r=this._index,i=this._source.lastIndexOf("<",r-1),o=this._source.lastIndexOf(">",r-1);i=o>i?o+1:i;var s=this._source.slice(i,r+10),a=e+" at pos "+r+": `"+s+"`",u=new t(a);return this.emit&&this.emit(n,u),u}},Pt=100,It={patterns:null,entryIds:null,emit:null,init:function(){this.patterns={comment:/^\s*#|^\s*$/,entity:/^([^=\s]+)\s*=\s*(.*)$/,multiline:/[^\\]\\$/,index:/\{\[\s*(\w+)(?:\(([^\)]*)\))?\s*\]\}/i,unicode:/\\u([0-9a-fA-F]{1,4})/g,entries:/[^\r\n]+/g,controlChars:/\\([\\\n\r\t\b\f\{\}\"\'])/g,placeables:/\{\{\s*([^\s]*?)\s*\}\}/}},parse:function(t,e){this.patterns||this.init(),this.emit=t;var n={},r=e.match(this.patterns.entries);if(!r)return n;for(var i=0;i<r.length;i++){var o=r[i];if(!this.patterns.comment.test(o)){for(;this.patterns.multiline.test(o)&&i<r.length;)o=o.slice(0,-1)+r[++i].trim();var s=o.match(this.patterns.entity);if(s)try{this.parseEntity(s[1],s[2],n)}catch(a){if(!this.emit)throw a}}}return n},parseEntity:function(t,e,n){var r,i,o=t.indexOf("[");-1!==o?(r=t.substr(0,o),i=t.substring(o+1,t.length-1)):(r=t,i=null);var s=r.split(".");if(s.length>2)throw this.error('Error in ID: "'+r+'". Nested attributes are not supported.');var a;if(s.length>1){if(r=s[0],a=s[1],"$"===a[0])throw this.error('Attribute can\'t start with "$"')}else a=null;this.setEntityValue(r,a,i,this.unescapeString(e),n)},setEntityValue:function(t,e,n,r,i){var s=r.indexOf("{{")>-1?this.parseString(r):r,a="string"==typeof s,u=i,c="string"==typeof i[t];if(i[t]||!e&&!n&&a||(i[t]=o(null),c=!1),e){if(c){var l=i[t];i[t]=o(null),i[t].value=l}i[t].attrs||(i[t].attrs=o(null)),i[t].attrs||a||(i[t].attrs[e]=o(null)),u=i[t].attrs,t=e}if(n){if(c=!1,"string"==typeof u[t]){var l=u[t];u[t]=o(null),u[t].index=this.parseIndex(l),u[t].value=o(null)}u=u[t].value,t=n,a=!0}if(!a||i[t]&&!c)u[t]||(u[t]=o(null)),u[t].value=s;else{if(t in u)throw this.error();u[t]=s}},parseString:function(t){var e=t.split(this.patterns.placeables),n=[],r=e.length,i=(r-1)/2;if(i>=Pt)throw this.error("Too many placeables ("+i+", max allowed is "+Pt+")");for(var o=0;o<e.length;o++)0!==e[o].length&&(o%2===1?n.push({type:"idOrVar",name:e[o]}):n.push(e[o]));return n},unescapeString:function(t){return-1!==t.lastIndexOf("\\")&&(t=t.replace(this.patterns.controlChars,"$1")),t.replace(this.patterns.unicode,function(t,e){return f(parseInt(e,16))})},parseIndex:function(e){var n=e.match(this.patterns.index);if(!n)throw new t("Malformed index");return n[2]?[{type:"call",expr:{type:"prop",expr:{type:"glob",name:"cldr"},prop:"plural",cmpt:!1},args:[{type:"idOrVar",name:n[2]}]}]:[{type:"idOrVar",name:n[1]}]},error:function(e){var n=arguments.length<=1||void 0===arguments[1]?"parsererror":arguments[1],r=new t(e);return this.emit&&this.emit(n,r),r}},Lt=["plural"],Ot=2500,Ft="⁨",Rt="⁩",Nt=new p,Dt={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3},Mt={0:function(){return"other"},1:function(t){return Y(t%100,3,10)?"few":0===t?"zero":Y(t%100,11,99)?"many":2===t?"two":1===t?"one":"other"},2:function(t){return 0!==t&&t%10===0?"many":2===t?"two":1===t?"one":"other"},3:function(t){return 1===t?"one":"other"},4:function(t){return Y(t,0,1)?"one":"other"},5:function(t){return Y(t,0,2)&&2!==t?"one":"other"},6:function(t){return 0===t?"zero":t%10===1&&t%100!==11?"one":"other"},7:function(t){return 2===t?"two":1===t?"one":"other"},8:function(t){return Y(t,3,6)?"few":Y(t,7,10)?"many":2===t?"two":1===t?"one":"other"},9:function(t){return 0===t||1!==t&&Y(t%100,1,19)?"few":1===t?"one":"other"},10:function(t){return Y(t%10,2,9)&&!Y(t%100,11,19)?"few":t%10!==1||Y(t%100,11,19)?"other":"one"},11:function(t){return Y(t%10,2,4)&&!Y(t%100,12,14)?"few":t%10===0||Y(t%10,5,9)||Y(t%100,11,14)?"many":t%10===1&&t%100!==11?"one":"other"},12:function(t){return Y(t,2,4)?"few":1===t?"one":"other"},13:function(t){return Y(t%10,2,4)&&!Y(t%100,12,14)?"few":1!==t&&Y(t%10,0,1)||Y(t%10,5,9)||Y(t%100,12,14)?"many":1===t?"one":"other"},14:function(t){return Y(t%100,3,4)?"few":t%100===2?"two":t%100===1?"one":"other"},15:function(t){return 0===t||Y(t%100,2,10)?"few":Y(t%100,11,19)?"many":1===t?"one":"other"},16:function(t){return t%10===1&&11!==t?"one":"other"},17:function(t){return 3===t?"few":0===t?"zero":6===t?"many":2===t?"two":1===t?"one":"other"},18:function(t){return 0===t?"zero":Y(t,0,2)&&0!==t&&2!==t?"one":"other"},19:function(t){return Y(t,2,10)?"few":Y(t,0,1)?"one":"other"},20:function(t){return!Y(t%10,3,4)&&t%10!==9||Y(t%100,10,19)||Y(t%100,70,79)||Y(t%100,90,99)?t%1e6===0&&0!==t?"many":t%10!==2||Z(t%100,[12,72,92])?t%10!==1||Z(t%100,[11,71,91])?"other":"one":"two":"few"},21:function(t){return 0===t?"zero":1===t?"one":"other"},22:function(t){return Y(t,0,1)||Y(t,11,99)?"one":"other"},23:function(t){return Y(t%10,1,2)||t%20===0?"one":"other"},24:function(t){return Y(t,3,10)||Y(t,13,19)?"few":Z(t,[2,12])?"two":Z(t,[1,11])?"one":"other"}},Ht=function(){function e(t){i(this,e),this._env=t,this._numberFormatters=null}return e.prototype._formatTuple=function(t,e,n,r,i){try{return $(this,t,e,n)}catch(o){return o.id=i?r+"::"+i:r,o.lang=t,this._env.emit("resolveerror",o,this),[{error:o},o.id]}},e.prototype._formatEntity=function(t,e,n,r){var i=this._formatTuple(t,e,n,r),s=i[1],a={value:s,attrs:null};if(n.attrs){a.attrs=o(null);for(var u in n.attrs){var c=this._formatTuple(t,e,n.attrs[u],r,u),l=c[1];a.attrs[u]=l}}return a},e.prototype._formatValue=function(t,e,n,r){return this._formatTuple(t,e,n,r)[1]},e.prototype.fetch=function(t){if(0===t.length)return s.resolve(t);var e=a(this._env._resLists.get(this));return s.all(e.map(this._env._getResource.bind(this._env,t[0]))).then(function(){return t})},e.prototype._resolve=function(e,n,r,i){var o=this,s=e[0];if(!s)return et.call(this,n,r,i);var a=!1,u=n.map(function(e,n){if(i&&void 0!==i[n])return i[n];var u=Array.isArray(e)?e:[e,void 0],c=u[0],l=u[1],h=o._getEntity(s,c);return h?r.call(o,s,l,h,c):(o._env.emit("notfounderror",new t('"'+c+'" not found in '+s.code,c,s),o),void(a=!0))});return a?this.fetch(e.slice(1)).then(function(t){return o._resolve(t,n,r,u)}):u},e.prototype.resolveEntities=function(t,e){var n=this;return this.fetch(t).then(function(t){return n._resolve(t,e,n._formatEntity)})},e.prototype.resolveValues=function(t,e){var n=this;return this.fetch(t).then(function(t){return n._resolve(t,e,n._formatValue)})},e.prototype._getEntity=function(e,n){for(var r=this._env._resCache,i=a(this._env._resLists.get(this)),o=0,s=void 0;s=i[o];o++){var u=r.get(s+e.code+e.src);if(!(u instanceof t)&&n in u)return u[n]}},e.prototype._getNumberFormatter=function(t){if(this._numberFormatters||(this._numberFormatters=new d),!this._numberFormatters.has(t)){var e=Intl.NumberFormat(t,{useGrouping:!1});return this._numberFormatters.set(t,e),e}return this._numberFormatters.get(t)},e.prototype._getMacro=function(t,e){switch(e){case"plural":return tt(t.code);default:return}},e}(),qt=_(o(null),{"fr-x-psaccent":{enumerable:!0,get:it("fr-x-psaccent","Runtime Accented")},"ar-x-psbidi":{enumerable:!0,get:it("ar-x-psbidi","Runtime Bidi")}}),Vt={properties:It,l20n:At},zt=function(){function t(e,n){i(this,t),this.defaultLang=e,this.fetchResource=n,this._resLists=new d,this._resCache=new d;var r={};this.emit=m.bind(this,r),this.addEventListener=g.bind(this,r),this.removeEventListener=y.bind(this,r)}return t.prototype.createContext=function(t){var e=new Ht(this);return this._resLists.set(e,new u(t)),e},t.prototype.destroyContext=function(t){var e=this,n=this._resLists,r=n.get(t);n["delete"](t),r.forEach(function(t){return ot(e._resCache,n,t)})},t.prototype._parse=function(t,e,n){var r=this,i=Vt[t];if(!i)return n;var o=function(t,n){return r.emit(t,st(e,n))};return i.parse.call(i,o,n)},t.prototype._create=function(t,e){if("pseudo"!==t.src)return e;var n=o(null);for(var r in e)n[r]=nt(e[r],qt[t.code].process);return n},t.prototype._getResource=function(t,e){var n=this,r=this._resCache,i=e+t.code+t.src;if(r.has(i))return r.get(i);var o=e.substr(e.lastIndexOf(".")+1),s=function(e){var s=n._parse(o,t,e);r.set(i,n._create(t,s))},a=function(e){e.lang=t,n.emit("fetcherror",e),r.set(i,e)},u="pseudo"===t.src?{code:this.defaultLang,src:"app"}:t,c=this.fetchResource(e,u).then(s,a);return r.set(i,c),c},t}(),Ut=function(){function t(e,n,r){var o=this;i(this,t),this.fetchResource=e,this.broadcast=n,this.ctxs=new d,this.interactive=D().then(function(){return o.init(r)})}return t.prototype.init=function(t){var e=this,n=ut(document.head);return this.defaultLanguage=n.defaultLang,this.availableLanguages=n.availableLangs,this.appVersion=n.appVersion,this.env=new zt(this.defaultLanguage,function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.fetchResource.apply(e,[e.appVersion].concat(n))}),this.requestLanguages(t)},t.prototype.registerView=function(t,e){var n=this;return this.interactive.then(function(){return n.ctxs.set(t,n.env.createContext(e)),!0})},t.prototype.unregisterView=function(t){return this.ctxs["delete"](t)},t.prototype.resolveEntities=function(t,e,n){return this.ctxs.get(t).resolveEntities(e,n)},t.prototype.formatValues=function(t,e){var n=this;return this.languages.then(function(r){return n.ctxs.get(t).resolveValues(r,e)})},t.prototype.resolvedLanguages=function(){return this.languages},t.prototype.requestLanguages=function(t){return _t.call(this,vt(),t)},t.prototype.getName=function(t){return qt[t].name},t.prototype.processString=function(t,e){return qt[t].process(e)},t.prototype.handleEvent=function(t){return _t.call(this,t.detail||vt(),navigator.languages)},t}(),Bt=function pe(){i(this,pe),this.type=this.constructor.name},Wt=function(t){function e(){i(this,e),t.call(this)}return r(e,t),e}(Bt),$t=function(t){function e(n){i(this,e),t.call(this),this.name=n}return r(e,t),e}(Bt),Jt=function(t){function e(n){i(this,e),t.call(this),this.name=n}return r(e,t),e}(Bt),Gt=function(t){function e(n){i(this,e),t.call(this),this.name=n}return r(e,t),e}(Bt),Qt=function(t){function e(){i(this,e),t.call(this)}return r(e,t),e}(Bt),Kt=function(t){function e(n,r){i(this,e),t.call(this),this.source=n,this.content=r,this._opchar='"'}return r(e,t),e}(Qt),Xt=function(t){function e(n){i(this,e),t.call(this),this.items=n}return r(e,t),e}(Qt),Zt=function(t){function e(n){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=arguments.length<=2||void 0===arguments[2]?null:arguments[2],s=arguments.length<=3||void 0===arguments[3]?[]:arguments[3];i(this,e),t.call(this),this.id=n,this.value=r,this.index=o,this.attrs=s}return r(e,t),e}(Wt),Yt=function(t){function e(){i(this,e),t.call(this),this.body=[]}return r(e,t),e}(Bt),te=function(t){function e(n,r){var o=arguments.length<=2||void 0===arguments[2]?null:arguments[2];i(this,e),t.call(this),this.id=n,this.value=r,this.index=o}return r(e,t),e}(Bt),ee=function(t){function e(n,r,o){i(this,e),t.call(this),this.id=n,this.value=r,this["default"]=o}return r(e,t),e}(Bt),ne=function(t){function e(n){i(this,e),t.call(this),this.body=n}return r(e,t),e}(Wt),re=function(t){function e(){i(this,e),t.call(this)}return r(e,t),e}(Bt),ie=function(t){function e(n,r){var o=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];i(this,e),t.call(this),this.idref=n,this.exp=r,this.computed=o}return r(e,t),e}(re),oe=function(t){function e(n,r){i(this,e),t.call(this),this.callee=n,this.args=r}return r(e,t),e}(re),se=function(t){function e(n){i(this,e),t.call(this),this.content=n}return r(e,t),e}(Wt),ae={Node:Bt,Identifier:$t,Value:Qt,String:Kt,Hash:Xt,Entity:Zt,Resource:Yt,Attribute:te,HashItem:ee,Comment:ne,Variable:Jt,Global:Gt,Expression:re,PropertyExpression:ie,CallExpression:oe,JunkEntry:se},ue=100,ce=function(){function e(t,n){i(this,e),this._config={pos:n},this._source=t,this._index=0,this._length=t.length,this._curEntryStart=0}return e.prototype.setPosition=function(t,e,n){this._config.pos&&(t._pos={start:e,end:n})},e.prototype.getResource=function(){var e=new ae.Resource;for(this.setPosition(e,0,this._length),e._errors=[],this.getWS();this._index<this._length;){try{e.body.push(this.getEntry())}catch(n){if(!(n instanceof t))throw n;e._errors.push(n),e.body.push(this.getJunkEntry())}this._index<this._length&&this.getWS()}return e},e.prototype.getEntry=function(){if(this._curEntryStart=this._index,"<"===this._source[this._index]){++this._index;var t=this.getIdentifier();return"["===this._source[this._index]?(++this._index,this.getEntity(t,this.getItemList(this.getExpression,"]"))):this.getEntity(t)}if(this._source.startsWith("/*",this._index))return this.getComment();throw this.error("Invalid entry")},e.prototype.getEntity=function(t,e){if(!this.getRequiredWS())throw this.error("Expected white space");var n=this._source.charAt(this._index),r=this.getValue(n,void 0===e),i=void 0;if(null===r){if(">"===n)throw this.error('Expected ">"');i=this.getAttributes()}else{var o=this.getRequiredWS();if(">"!==this._source[this._index]){if(!o)throw this.error('Expected ">"');i=this.getAttributes()}}++this._index;var s=new ae.Entity(t,r,e,i);return this.setPosition(s,this._curEntryStart,this._index),s},e.prototype.getValue=function(){var t=arguments.length<=0||void 0===arguments[0]?this._source[this._index]:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];switch(t){case"'":case'"':return this.getString(t,1);case"{":return this.getHash()}if(!e)throw this.error("Unknown value type");return null},e.prototype.getWS=function(){for(var t=this._source.charCodeAt(this._index);32===t||10===t||9===t||13===t;)t=this._source.charCodeAt(++this._index)},e.prototype.getRequiredWS=function(){for(var t=this._index,e=this._source.charCodeAt(t);32===e||10===e||9===e||13===e;)e=this._source.charCodeAt(++this._index);return this._index!==t},e.prototype.getIdentifier=function(){var t=this._index,e=this._source.charCodeAt(this._index);if(!(e>=97&&122>=e||e>=65&&90>=e||95===e))throw this.error("Identifier has to start with [a-zA-Z_]");for(e=this._source.charCodeAt(++this._index);e>=97&&122>=e||e>=65&&90>=e||e>=48&&57>=e||95===e;)e=this._source.charCodeAt(++this._index);var n=new ae.Identifier(this._source.slice(t,this._index));return this.setPosition(n,t,this._index),n},e.prototype.getUnicodeChar=function(){for(var t=0;4>t;t++){var e=this._source.charCodeAt(++this._index);if(!(e>96&&103>e||e>64&&71>e||e>47&&58>e))throw this.error("Illegal unicode escape sequence")}return"\\u"+this._source.slice(this._index-3,this._index+1)},e.prototype.getString=function(t,e){var n=[],r="",i=0;this._index+=e-1;for(var o=this._index+1,s=!1;!s;){var a=this._source[++this._index];switch(a){case"\\":var u=this._source[++this._index];if("u"===u)r+=this.getUnicodeChar();else if(u===t||"\\"===u)r+=u;else{if("{"!==u||"{"!==this._source[this._index+1])throw this.error("Illegal escape sequence");r+="{"}break;case"{":if("{"===this._source[this._index+1]){if(i>ue-1)throw this.error("Too many placeables, maximum allowed is "+ue);if(r.length&&(n.push(r),r=""),this._index+=2,this.getWS(),n.push(this.getExpression()),this.getWS(),!this._source.startsWith("}}",this._index))throw this.error('Expected "}}"');this._index+=1,i++;break}default:if(a===t){this._index++,s=!0;break}if(r+=a,this._index+1>=this._length)throw this.error("Unclosed string literal")}}r.length&&n.push(r);var c=new ae.String(this._source.slice(o,this._index-1),n);return this.setPosition(c,o,this._index),c._opchar=t,c},e.prototype.getAttributes=function(){for(var t=[];;){var e=this.getAttribute();t.push(e);var n=this.getRequiredWS(),r=this._source.charAt(this._index);if(">"===r)break;if(!n)throw this.error('Expected ">"')}return t},e.prototype.getAttribute=function(){var t=this._index,e=this.getIdentifier(),n=void 0;if("["===this._source[this._index]&&(++this._index,this.getWS(),n=this.getItemList(this.getExpression,"]")),this.getWS(),":"!==this._source[this._index])throw this.error('Expected ":"');++this._index,this.getWS();var r=new ae.Attribute(e,this.getValue(),n);return this.setPosition(r,t,this._index),r},e.prototype.getHash=function(){var t=this._index,e=[];for(++this._index,this.getWS();;){e.push(this.getHashItem()),this.getWS();var n=","===this._source[this._index];if(n&&(++this._index,this.getWS()),"}"===this._source[this._index]){++this._index;break}if(!n)throw this.error('Expected "}"')}var r=new ae.Hash(e);return this.setPosition(r,t,this._index),r},e.prototype.getHashItem=function(){var t=this._index,e=!1;"*"===this._source[this._index]&&(++this._index,e=!0);var n=this.getIdentifier();if(this.getWS(),":"!==this._source[this._index])throw this.error('Expected ":"');++this._index,this.getWS();var r=new ae.HashItem(n,this.getValue(),e);return this.setPosition(r,t,this._index),r},e.prototype.getComment=function(){this._index+=2;var t=this._index,e=this._source.indexOf("*/",t);if(-1===e)throw this.error("Comment without a closing tag");this._index=e+2;var n=new ae.Comment(this._source.slice(t,e));return this.setPosition(n,t-2,this._index),n},e.prototype.getExpression=function(){for(var t=this._index,e=this.getPrimaryExpression();;){var n=this._source[this._index];if("."===n||"["===n)++this._index,e=this.getPropertyExpression(e,"["===n,t);else{if("("!==n)break;++this._index,e=this.getCallExpression(e,t)}}return e},e.prototype.getPropertyExpression=function(t,e,n){var r=void 0;if(e){if(this.getWS(),r=this.getExpression(),this.getWS(),"]"!==this._source[this._index])throw this.error('Expected "]"');++this._index}else r=this.getIdentifier();var i=new ae.PropertyExpression(t,r,e);return this.setPosition(i,n,this._index),i},e.prototype.getCallExpression=function(t,e){this.getWS();var n=new ae.CallExpression(t,this.getItemList(this.getExpression,")"));return this.setPosition(n,e,this._index),n},e.prototype.getPrimaryExpression=function(){var t=this._index,e=this._source[this._index];switch(e){case"$":++this._index;var n=new ae.Variable(this.getIdentifier());return this.setPosition(n,t,this._index),n;case"@":++this._index;var r=new ae.Global(this.getIdentifier());return this.setPosition(r,t,this._index),r;default:return this.getIdentifier()}},e.prototype.getItemList=function(t,e){var n=[],r=!1;for(this.getWS(),this._source[this._index]===e&&(++this._index,r=!0);!r;){n.push(t.call(this)),this.getWS();var i=this._source.charAt(this._index);switch(i){case",":++this._index,this.getWS();break;case e:++this._index,r=!0;break;default:throw this.error('Expected "," or "'+e+'"')}}return n},e.prototype.error=function(e){var n=this._index,r=this._source.lastIndexOf("<",n-1),i=this._source.lastIndexOf(">",n-1);r=i>r?i+1:r;var o=this._source.slice(r,n+10),s=e+" at pos "+n+": `"+o+"`",a=new t(s);return a._pos={start:n,end:void 0},a.offset=n-r,a.description=e,a.context=o,a},e.prototype.getJunkEntry=function(){var t=this._index,e=this._source.indexOf("<",t),n=this._source.indexOf("/*",t);-1===e&&(e=this._length),-1===n&&(n=this._length);var r=Math.min(e,n);this._index=r;var i=new ae.JunkEntry(this._source.slice(this._curEntryStart,r));return this.setPosition(i,this._curEntryStart,r),i},e}(),le={parseResource:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=new ce(t,e);return n.getResource()}},he={serialize:function(t){var e="";for(var n in t)e+=this.dumpEntry(t[n])+"\n";return e},serializeString:function(t){var e="";return e+="object"==typeof t?this.dumpValue(t,0):this.dumpString(t)},dumpEntry:function(t){return this.dumpEntity(t)},dumpEntity:function(t){var e,n=null,r={},i="";for(var o in t)switch(o){case"$v":n=t.$v;break;case"$x":i=this.dumpIndex(t.$x);break;case"$i":e=this.dumpIdentifier(t.$i);break;default:r[o]=t[o]}return 0===v(r).length?"<"+e+i+" "+this.dumpValue(n,0)+">":"<"+e+i+" "+this.dumpValue(n,0)+"\n"+this.dumpAttributes(r)+">"},dumpIdentifier:function(t){return t.replace(/-/g,"_")},dumpValue:function(t,e){return null===t?"":"string"==typeof t?this.dumpString(t):Array.isArray(t)?this.dumpComplexString(t):"object"==typeof t?t.o?this.dumpValue(t.v):this.dumpHash(t,e):void 0},dumpString:function(t){return t?'"'+t.replace(/"/g,'\\"')+'"':""},dumpComplexString:function(t){for(var e='"',n=0;n<t.length;n++)e+="string"==typeof t[n]?t[n].replace(/"/g,'\\"'):"{{ "+this.dumpExpression(t[n])+" }}";return e+'"'},dumpAttributes:function(t){var e="";for(var n in t)e+=t[n].x?"  "+n+this.dumpIndex(t[n].x)+": "+this.dumpValue(t[n].v,1)+"\n":"  "+n+": "+this.dumpValue(t[n],1)+"\n";return e},dumpExpression:function(t){switch(t.t){case"call":return this.dumpCallExpression(t);case"prop":return this.dumpPropertyExpression(t)}return this.dumpPrimaryExpression(t)},dumpPropertyExpression:function(t){var e=this.dumpExpression(t.e),n=void 0;return t.c?(n=this.dumpExpression(t.p),e+"["+n+"]"):(n=this.dumpIdentifier(t.p),e+"."+n)},dumpCallExpression:function(t){var e=this.dumpExpression(t.v),n=this.dumpItemList(t.a,this.dumpExpression.bind(this));return e+="("+n+")"},dumpPrimaryExpression:function(e){var n="";if("string"==typeof e)return e;switch(e.t){case"glob":n+="@",n+=e.v;break;case"var":n+="$",n+=e.v;break;case"id":n+=this.dumpIdentifier(e.v);break;case"idOrVar":n+=this.dumpIdentifier(e.v);break;default:throw new t("Unknown primary expression")}return n},dumpHash:function(t,e){var n,r,i=[];"__default"in t&&(r=t.__default);for(var o in t){var s="  ";("_"!==o.charAt(0)||"_"!==o.charAt(1))&&(o===r&&(s=" *"),n=s+o+": "+this.dumpValue(t[o],e+1),i.push(n))}var a=new Array(e+1).join("  ");return"{\n"+a+i.join(",\n"+a)+"\n"+a+"}"},dumpItemList:function(t,e){return t.map(e).join(", ")},dumpIndex:function(t){return"["+this.dumpItemList(t,this.dumpExpression.bind(this))+"]"}},fe={code:"en-US",src:"app"};window.L20n={fetchResource:n,Client:bt,Remote:Ut,View:Ct,broadcast:b,ASTParser:le,ASTSerializer:he,EntriesParser:At,EntriesSerializer:mt,PropertiesParser:It,Context:Ht,Env:zt,L10nError:t,emit:m,addEventListener:g,removeEventListener:y,prioritizeLocales:at,MockContext:gt,lang:fe,getPluralRule:tt,walkEntry:nt,walkValue:rt,pseudo:qt,format:$}}()},function(t,e,n){"use strict";t.exports={"default":n(2),__esModule:!0}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){return r.create(t,e)}},function(t,e){"use strict";var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){"use strict";t.exports={"default":n(5),__esModule:!0}},function(t,e,n){"use strict";n(6),n(7),n(30),n(37),t.exports=n(15).Promise},function(t,e){"use strict"},function(t,e,n){"use strict";var r=n(8)(!0);n(11)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(9),i=n(10);t.exports=function(t){return function(e,n){var o,s,a=String(i(e)),u=r(n),c=a.length;return 0>u||u>=c?t?"":void 0:(o=a.charCodeAt(u),55296>o||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):(o-55296<<10)+(s-56320)+65536)}}},function(t,e){"use strict";var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){"use strict";t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(12),i=n(13),o=n(18),s=n(19),a=n(23),u=n(24),c=n(25),l=n(26),h=n(3).getProto,f=n(27)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",_="values",m=function(){return this};t.exports=function(t,e,n,g,y,b,w){c(n,e,g);var x,E,k=function(t){if(!p&&t in j)return j[t];switch(t){case v:return function(){return new n(this,t)};case _:return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",S=y==_,C=!1,j=t.prototype,A=j[f]||j[d]||y&&j[y],P=A||k(y);if(A){var I=h(P.call(new t));l(I,T,!0),!r&&a(j,d)&&s(I,f,m),S&&A.name!==_&&(C=!0,P=function(){return A.call(this)})}if(r&&!w||!p&&!C&&j[f]||s(j,f,P),u[e]=P,u[T]=m,y)if(x={values:S?P:k(_),keys:b?P:k(v),entries:S?k("entries"):P},w)for(E in x)E in j||o(j,E,x[E]);else i(i.P+i.F*(p||C),e,x);return x}},function(t,e){"use strict";t.exports=!0},function(t,e,n){"use strict";var r=n(14),i=n(15),o=n(16),s="prototype",a=function u(t,e,n){var a,c,l,h=t&u.F,f=t&u.G,p=t&u.S,d=t&u.P,v=t&u.B,_=t&u.W,m=f?i:i[e]||(i[e]={}),g=f?r:p?r[e]:(r[e]||{})[s];f&&(n=e);for(a in n)c=!h&&g&&a in g,c&&a in m||(l=c?g[a]:n[a],m[a]=f&&"function"!=typeof g[a]?n[a]:v&&c?o(l,r):_&&g[a]==l?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e[s]=t[s],e}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((m[s]||(m[s]={}))[a]=l))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,t.exports=a},function(t,e){"use strict";var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){"use strict";var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";var r=n(17);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";t.exports=n(19)},function(t,e,n){"use strict";var r=n(3),i=n(20);t.exports=n(21)?function(t,e,n){return r.setDesc(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";t.exports=!n(22)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){"use strict";var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e){"use strict";t.exports={}},function(t,e,n){"use strict";var r=n(3),i=n(20),o=n(26),s={};n(19)(s,n(27)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r.create(s,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(3).setDesc,i=n(23),o=n(27)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(28)("wks"),i=n(29),o=n(14).Symbol;t.exports=function(t){return r[t]||(r[t]=o&&o[t]||(o||i)("Symbol."+t))}},function(t,e,n){"use strict";var r=n(14),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){"use strict";var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){"use strict";n(31);var r=n(24);r.NodeList=r.HTMLCollection=r.Array},function(t,e,n){"use strict";var r=n(32),i=n(33),o=n(24),s=n(34);t.exports=n(11)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){"use strict";t.exports=function(){}},function(t,e){"use strict";t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(35),i=n(10);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";var r=n(36);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){"use strict";var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r,i=n(3),o=n(12),s=n(14),a=n(16),u=n(38),c=n(13),l=n(39),h=n(40),f=n(17),p=n(41),d=n(42),v=n(47).set,_=n(51),m=n(27)("species"),g=n(55),y=n(56),b="Promise",w=s.process,x="process"==u(w),E=s[b],k=function(t){var e=new E(function(){});return t&&(e.constructor=Object),E.resolve(e)===e},T=function(){function t(e){var n=new E(e);return v(n,t.prototype),n}var e=!1;try{if(e=E&&E.resolve&&k(),v(t,E),t.prototype=i.create(E.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(e=!1),e&&n(21)){var r=!1;E.resolve(i.setDesc({},"then",{get:function(){r=!0}})),e=r}}catch(o){e=!1}return e}(),S=function(t,e){return o&&t===E&&e===r?!0:_(t,e)},C=function(t){var e=h(t)[m];return void 0!=e?e:t},j=function(t){var e;return l(t)&&"function"==typeof(e=t.then)?e:!1},A=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=f(e),this.reject=f(n)},P=function(t){try{t()}catch(e){return{error:e
}}},I=function(t,e){if(!t.n){t.n=!0;var n=t.c;y(function(){for(var r=t.v,i=1==t.s,o=0,a=function(e){var n,o,s=i?e.ok:e.fail,a=e.resolve,u=e.reject;try{s?(i||(t.h=!0),n=s===!0?r:s(r),n===e.promise?u(TypeError("Promise-chain cycle")):(o=j(n))?o.call(n,a,u):a(n)):u(r)}catch(c){u(c)}};n.length>o;)a(n[o++]);n.length=0,t.n=!1,e&&setTimeout(function(){var e,n,i=t.p;L(i)&&(x?w.emit("unhandledRejection",r,i):(e=s.onunhandledrejection)?e({promise:i,reason:r}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",r)),t.a=void 0},1)})}},L=function R(t){var e,n=t._d,r=n.a||n.c,i=0;if(n.h)return!1;for(;r.length>i;)if(e=r[i++],e.fail||!R(e.promise))return!1;return!0},O=function(t){var e=this;e.d||(e.d=!0,e=e.r||e,e.v=t,e.s=2,e.a=e.c.slice(),I(e,!0))},F=function N(t){var e,n=this;if(!n.d){n.d=!0,n=n.r||n;try{if(n.p===t)throw TypeError("Promise can't be resolved itself");(e=j(t))?y(function(){var r={r:n,d:!1};try{e.call(t,a(N,r,1),a(O,r,1))}catch(i){O.call(r,i)}}):(n.v=t,n.s=1,I(n,!1))}catch(r){O.call({r:n,d:!1},r)}}};T||(E=function(t){f(t);var e=this._d={p:p(this,E,b),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{t(a(F,e,1),a(O,e,1))}catch(n){O.call(e,n)}},n(61)(E.prototype,{then:function(t,e){var n=new A(g(this,E)),r=n.promise,i=this._d;return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,i.c.push(n),i.a&&i.a.push(n),i.s&&I(i,!1),r},"catch":function(t){return this.then(void 0,t)}})),c(c.G+c.W+c.F*!T,{Promise:E}),n(26)(E,b),n(62)(b),r=n(15)[b],c(c.S+c.F*!T,b,{reject:function(t){var e=new A(this),n=e.reject;return n(t),e.promise}}),c(c.S+c.F*(!T||k(!0)),b,{resolve:function(t){if(t instanceof E&&S(t.constructor,this))return t;var e=new A(this),n=e.resolve;return n(t),e.promise}}),c(c.S+c.F*!(T&&n(63)(function(t){E.all(t)["catch"](function(){})})),b,{all:function(t){var e=C(this),n=new A(e),r=n.resolve,o=n.reject,s=[],a=P(function(){d(t,!1,s.push,s);var n=s.length,a=Array(n);n?i.each.call(s,function(t,i){var s=!1;e.resolve(t).then(function(t){s||(s=!0,a[i]=t,--n||r(a))},o)}):r(a)});return a&&o(a.error),n.promise},race:function(t){var e=C(this),n=new A(e),r=n.reject,i=P(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e,n){"use strict";var r=n(36),i=n(27)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=(e=Object(t))[i])?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){"use strict";t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var r=n(39);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){"use strict";t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError(n+": use the 'new' operator!");return t}},function(t,e,n){"use strict";var r=n(16),i=n(43),o=n(44),s=n(40),a=n(45),u=n(46);t.exports=function(t,e,n,c){var l,h,f,p=u(t),d=r(n,c,e?2:1),v=0;if("function"!=typeof p)throw TypeError(t+" is not iterable!");if(o(p))for(l=a(t.length);l>v;v++)e?d(s(h=t[v])[0],h[1]):d(t[v]);else for(f=p.call(t);!(h=f.next()).done;)i(f,d,h.value,e)}},function(t,e,n){"use strict";var r=n(40);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var s=t["return"];throw void 0!==s&&r(s.call(t)),o}}},function(t,e,n){"use strict";var r=n(24),i=n(27)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(9),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";var r=n(38),i=n(27)("iterator"),o=n(24);t.exports=n(15).getIteratorMethod=function(t){return void 0!=t?t[i]||t["@@iterator"]||o[r(t)]:void 0}},function(t,e,n){"use strict";var r=n(48)["default"],i=n(3).getDesc,o=n(39),s=n(40),a=function(t,e){if(s(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:r||("__proto__"in{}?function(t,e,r){try{r=n(16)(Function.call,i(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},function(t,e,n){"use strict";t.exports={"default":n(49),__esModule:!0}},function(t,e,n){"use strict";n(50),t.exports=n(15).Object.setPrototypeOf},function(t,e,n){"use strict";var r=n(13);r(r.S,"Object",{setPrototypeOf:n(47).set})},function(t,e,n){"use strict";var r=n(52)["default"];t.exports=r||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){"use strict";t.exports={"default":n(53),__esModule:!0}},function(t,e,n){"use strict";n(54),t.exports=n(15).Object.is},function(t,e,n){"use strict";var r=n(13);r(r.S,"Object",{is:n(51)})},function(t,e,n){"use strict";var r=n(40),i=n(17),o=n(27)("species");t.exports=function(t,e){var n,s=r(t).constructor;return void 0===s||void 0==(n=r(s)[o])?e:i(n)}},function(t,e,n){"use strict";var r,i,o,s=n(14),a=n(57).set,u=s.MutationObserver||s.WebKitMutationObserver,c=s.process,l=s.Promise,h="process"==n(36)(c),f=function(){var t,e,n;for(h&&(t=c.domain)&&(c.domain=null,t.exit());r;)e=r.domain,n=r.fn,e&&e.enter(),n(),e&&e.exit(),r=r.next;i=void 0,t&&t.enter()};if(h)o=function(){c.nextTick(f)};else if(u){var p=1,d=document.createTextNode("");new u(f).observe(d,{characterData:!0}),o=function(){d.data=p=-p}}else o=l&&l.resolve?function(){l.resolve().then(f)}:function(){a.call(s,f)};t.exports=function(t){var e={fn:t,next:void 0,domain:h&&c.domain};i&&(i.next=e),r||(r=e,o()),i=e}},function(t,e,n){"use strict";var r,i,o,s=n(16),a=n(58),u=n(59),c=n(60),l=n(14),h=l.process,f=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=0,_={},m="onreadystatechange",g=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},y=function(t){g.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return _[++v]=function(){a("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete _[t]},"process"==n(36)(h)?r=function(t){h.nextTick(s(g,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=y,r=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",y,!1)):r=m in c("script")?function(t){u.appendChild(c("script"))[m]=function(){u.removeChild(this),g.call(t)}}:function(t){setTimeout(s(g,t,1),0)}),t.exports={set:f,clear:p}},function(t,e){"use strict";t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";t.exports=n(14).document&&document.documentElement},function(t,e,n){"use strict";var r=n(39),i=n(14).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){"use strict";var r=n(18);t.exports=function(t,e){for(var n in e)r(t,n,e[n]);return t}},function(t,e,n){"use strict";var r=n(15),i=n(3),o=n(21),s=n(27)("species");t.exports=function(t){var e=r[t];o&&e&&!e[s]&&i.setDesc(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(64)["default"],i=n(27)("iterator"),o=!1;try{var s=[7][i]();s["return"]=function(){o=!0},r(s,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var r=[7],s=r[i]();s.next=function(){n=!0},r[i]=function(){return s},t(r)}catch(a){}return n}},function(t,e,n){"use strict";t.exports={"default":n(65),__esModule:!0}},function(t,e,n){"use strict";n(7),n(66),t.exports=n(15).Array.from},function(t,e,n){"use strict";var r=n(64)["default"],i=n(16),o=n(13),s=n(67),a=n(43),u=n(44),c=n(45),l=n(46);o(o.S+o.F*!n(63)(function(t){r(t)}),"Array",{from:function(t){var e,n,r,o,h=s(t),f="function"==typeof this?this:Array,p=arguments,d=p.length,v=d>1?p[1]:void 0,_=void 0!==v,m=0,g=l(h);if(_&&(v=i(v,d>2?p[2]:void 0,2)),void 0==g||f==Array&&u(g))for(e=c(h.length),n=new f(e);e>m;m++)n[m]=_?v(h[m],m):h[m];else for(o=g.call(h),n=new f;!(r=o.next()).done;m++)n[m]=_?a(o,v,[r.value,m],!0):r.value;return n.length=m,n}})},function(t,e,n){"use strict";var r=n(10);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";t.exports={"default":n(69),__esModule:!0}},function(t,e,n){"use strict";n(6),n(7),n(30),n(70),n(77),t.exports=n(15).Set},function(t,e,n){"use strict";var r=n(71);n(76)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r=n(72)["default"],i=n(3),o=n(19),s=n(61),a=n(16),u=n(41),c=n(10),l=n(42),h=n(11),f=n(33),p=n(29)("id"),d=n(23),v=n(39),_=n(62),m=n(21),g=r||v,y=m?"_s":"size",b=0,w=function(t,e){if(!v(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!d(t,p)){if(!g(t))return"F";if(!e)return"E";o(t,p,++b)}return"O"+t[p]},x=function(t,e){var n,r=w(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,r){var o=t(function(t,s){u(t,o,e),t._i=i.create(null),t._f=void 0,t._l=void 0,t[y]=0,void 0!=s&&l(s,n,t[r],t)});return s(o.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[y]=0},"delete":function(t){var e=this,n=x(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[y]--}return!!n},forEach:function(t){for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!x(this,t)}}),m&&i.setDesc(o.prototype,"size",{get:function(){return c(this[y])}}),o},def:function(t,e,n){var r,i,o=x(t,e);return o?o.v=n:(t._l=o={i:i=w(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[y]++,"F"!==i&&(t._i[i]=o)),t},getEntry:x,setStrong:function(t,e,n){h(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),_(e)}}},function(t,e,n){"use strict";t.exports={"default":n(73),__esModule:!0}},function(t,e,n){"use strict";n(74),t.exports=n(15).Object.isExtensible},function(t,e,n){"use strict";var r=n(39);n(75)("isExtensible",function(t){return function(e){return r(e)?t?t(e):!0:!1}})},function(t,e,n){"use strict";var r=n(13),i=n(15),o=n(22);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],s={};s[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){"use strict";var r=n(3),i=n(14),o=n(13),s=n(22),a=n(19),u=n(61),c=n(42),l=n(41),h=n(39),f=n(26),p=n(21);t.exports=function(t,e,n,d,v,_){var m=i[t],g=m,y=v?"set":"add",b=g&&g.prototype,w={};return p&&"function"==typeof g&&(_||b.forEach&&!s(function(){(new g).entries().next()}))?(g=e(function(e,n){l(e,g,t),e._c=new m,void 0!=n&&c(n,v,e[y],e)}),r.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(t){var e="add"==t||"set"==t;t in b&&(!_||"clear"!=t)&&a(g.prototype,t,function(n,r){if(!e&&_&&!h(n))return"get"==t?void 0:!1;var i=this._c[t](0===n?0:n,r);return e?this:i})}),"size"in b&&r.setDesc(g.prototype,"size",{get:function(){return this._c.size}})):(g=d.getConstructor(e,t,v,y),u(g.prototype,n)),f(g,t),w[t]=g,o(o.G+o.W+o.F,w),_||d.setStrong(g,t,v),g}},function(t,e,n){"use strict";var r=n(13);r(r.P,"Set",{toJSON:n(78)("Set")})},function(t,e,n){"use strict";var r=n(42),i=n(38);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");var e=[];return r(this,!1,e.push,e),e}}},function(t,e,n){"use strict";t.exports={"default":n(80),__esModule:!0}},function(t,e,n){"use strict";n(30),n(7),t.exports=n(81)},function(t,e,n){"use strict";var r=n(40),i=n(46);t.exports=n(15).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";t.exports={"default":n(83),__esModule:!0}},function(t,e,n){"use strict";n(7),n(30),t.exports=n(27)("iterator")},function(t,e,n){"use strict";t.exports={"default":n(85),__esModule:!0}},function(t,e,n){"use strict";n(6),n(30),n(86),t.exports=n(15).WeakMap},function(t,e,n){"use strict";var r=n(72)["default"],i=n(87)["default"],o=n(3),s=n(18),a=n(90),u=n(39),c=n(23),l=a.frozenStore,h=a.WEAK,f=r||u,p={},d=n(76)("WeakMap",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){if(u(t)){if(!f(t))return l(this).get(t);if(c(t,h))return t[h][this._i]}},set:function(t,e){return a.def(this,t,e)}},a,!0,!0);7!=(new d).set((i||Object)(p),7).get(p)&&o.each.call(["delete","has","get","set"],function(t){var e=d.prototype,n=e[t];s(e,t,function(e,r){if(u(e)&&!f(e)){var i=l(this)[t](e,r);return"set"==t?this:i}return n.call(this,e,r)})})},function(t,e,n){"use strict";t.exports={"default":n(88),__esModule:!0}},function(t,e,n){"use strict";n(89),t.exports=n(15).Object.freeze},function(t,e,n){"use strict";var r=n(39);n(75)("freeze",function(t){return function(e){return t&&r(e)?t(e):e}})},function(t,e,n){"use strict";var r=n(72)["default"],i=n(19),o=n(61),s=n(40),a=n(39),u=n(41),c=n(42),l=n(91),h=n(23),f=n(29)("weak"),p=r||a,d=l(5),v=l(6),_=0,m=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},y=function(t,e){return d(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=y(this,t);return e?e[1]:void 0},has:function(t){return!!y(this,t)},set:function(t,e){var n=y(this,t);n?n[1]=e:this.a.push([t,e])},"delete":function(t){var e=v(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,r){var i=t(function(t,o){u(t,i,e),t._i=_++,t._l=void 0,void 0!=o&&c(o,n,t[r],t)});return o(i.prototype,{"delete":function(t){return a(t)?p(t)?h(t,f)&&h(t[f],this._i)&&delete t[f][this._i]:m(this)["delete"](t):!1},has:function(t){return a(t)?p(t)?h(t,f)&&h(t[f],this._i):m(this).has(t):!1}}),i},def:function(t,e,n){return p(s(e))?(h(e,f)||i(e,f,{}),e[f][t._i]=n):m(t).set(e,n),t},frozenStore:m,WEAK:f}},function(t,e,n){"use strict";var r=n(16),i=n(35),o=n(67),s=n(45),a=n(92);t.exports=function(t){var e=1==t,n=2==t,u=3==t,c=4==t,l=6==t,h=5==t||l;return function(f,p,d){for(var v,_,m=o(f),g=i(m),y=r(p,d,3),b=s(g.length),w=0,x=e?a(f,b):n?a(f,0):void 0;b>w;w++)if((h||w in g)&&(v=g[w],_=y(v,w,m),t))if(e)x[w]=_;else if(_)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(c)return!1;return l?-1:u||c?c:x}}},function(t,e,n){"use strict";var r=n(39),i=n(93),o=n(27)("species");t.exports=function(t,e){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=void 0),r(n)&&(n=n[o],null===n&&(n=void 0))),new(void 0===n?Array:n)(e)}},function(t,e,n){"use strict";var r=n(36);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";t.exports={"default":n(95),__esModule:!0}},function(t,e,n){"use strict";n(96),t.exports=n(15).String.fromCodePoint},function(t,e,n){"use strict";var r=n(94)["default"],i=n(13),o=n(97),s=String.fromCharCode,a=r;i(i.S+i.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments,i=r.length,a=0;i>a;){if(e=+r[a++],o(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(65536>e?s(e):s(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){"use strict";var r=n(9),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),0>t?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";t.exports={"default":n(99),__esModule:!0}},function(t,e,n){"use strict";n(6),n(30),n(100),t.exports=n(15).WeakSet},function(t,e,n){"use strict";var r=n(90);n(76)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t,!0)}},r,!1,!0)},function(t,e,n){"use strict";t.exports={"default":n(102),__esModule:!0}},function(t,e,n){"use strict";n(6),n(7),n(30),n(103),n(104),t.exports=n(15).Map},function(t,e,n){"use strict";var r=n(71);n(76)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(13);r(r.P,"Map",{toJSON:n(78)("Map")})},function(t,e,n){"use strict";t.exports={"default":n(106),__esModule:!0}},function(t,e,n){"use strict";n(107),t.exports=n(15).Object.keys},function(t,e,n){"use strict";var r=n(67);n(75)("keys",function(t){return function(e){return t(r(e))}})},function(t,e,n){"use strict";t.exports={"default":n(109),__esModule:!0}},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e){return r.setDescs(t,e)}}]),function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1);window.EFLJourney=new r.EFLJourney(window)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),a=r(s),u=n(3),c=r(u),l=n(4),h={LIBRARY_NOT_INITIALIZED:0,LIBRARY_INITIALIZED:1,STEP_LOADING:2,STEP_STARTED:3,SCREENS_COMPLETED:4,STEP_SEND_RESULTS:5,STEP_FINISHED:6,APPLICATION_FINISHED:7};e.JOURNEY_STATE=h;var f=function(){function t(e){i(this,t),this.context=e,this.moduleState=h.LIBRARY_NOT_INITIALIZED,this.showHeader=!0,this.showFooter=!0,this.autoStart=!0,this.currentModuleNumber=0,this.currentStepProgress=0,this.navigation={logo:!1,logoSrc:"EFL_logo.png",title:!0,progressBar:!0,localization:!1,timer:!0,helpButton:!0,buttons:!0},this.localization={localePath:"locales/journey.{locale}.l20n",locales:{en:{name:"English"},es:{name:"Spanish"}}}}return o(t,[{key:"init",value:function(t){var e=this;if(!t)return void console.error("Cannot initialize Journey API: no config object.");if(!t.player)return void console.error("Cannot initialize Journey API: no player object.");if(!t.target)return void console.error("Cannot initialize Journey API: no target value.");if(t.ajEndpoint||console.error("Cannot initialize Journey API: no ajEndpoint value."),!t.encryptorEndpoint)return void console.error("Cannot initialize Journey API: no encryptorEndpoint value.");if(!t.assessmentKey)return void console.error("Cannot initialize Journey API: no assessmentKey value.");this.target=t.target,this.encryptorEndpoint=t.encryptorEndpoint,this.ajEndpoint=t.ajEndpoint,this.assessmentKey=t.assessmentKey,this.setupPlayer(t.player),this.completedStep=0,"boolean"==typeof t.autoStart&&(this.autoStart=t.autoStart),"boolean"==typeof t.showHeader&&(this.showHeader=t.showHeader),"boolean"==typeof t.showFooter&&(this.showFooter=t.showFooter),"object"==typeof t.navigation&&this.setupNavigation(t.navigation),"object"==typeof t.localization?this.L20n=new c["default"](t.localization):this.L20n=new c["default"](this.localization),this.api=new a["default"]({encrypterUrl:this.encryptorEndpoint,backendUrl:this.ajEndpoint});var n=this.createNavigation(this.target),r=this.getModules(this.assessmentKey),i=[n,r];return t.moduleStyle&&"string"==typeof t.moduleStyle&&i.push(this.getStyleConfig(t.moduleStyle)),Promise.all(i).then(function(t){e.modules=t[1].modules,e.steps=t[1].steps,e.firstStep=t[1].firstStep,e.applicant=t[1].applicant?t[1].applicant:{},e.currentStep=t[1].currentStep,3==i.length&&(e.moduleStyle=t[2]),e.moduleState=h.LIBRARY_INITIALIZED,e.autoStart?e.startNextStep():e.updateUIState()})["catch"](function(t){console.error(t.stack)})}},{key:"createNavigation",value:function(t){var e=this;return new Promise(function(n,r){var i=document.getElementById(t);if(!i)return void r(new Error("No element with id: "+t+"."));i.setAttribute("class","efl-journey-root");var o=e.navigation.logoSrc,s='\n                <div id="efl-below-nav-overlay" class="efl-overlay efl-hidden"></div>\n                <div class="efl-top-bar">\n                    <div id="efl-nav-overlay" class="efl-overlay efl-hidden"></div>\n                    <div class="mui-container-fluid">\n                        <div class="mui-row">\n                            <div class="mui-col-xs-12">\n                                <div id="efl-journey-top-bar" class="efl-top-progress-bar-wrapper">\n                                    <div id="efl-logo" class="efl-img-wrapper">\n                                        <img src="'+o+'">\n                                    </div>\n                                    <div class="efl-progress-bar-wrapper">\n                                        <div id="efl-progress" class="efl-progress-bar"></div>\n                                    </div>\n                                    <div class="efl-locale-select-wrapper">\n                                        <div id="efl-locale-select" class="efl-language-picker">\n                                            <div class="mui-dropdown">\n                                                <button id="efl-selected-language-button" class="mui-btn mui-btn--primary" data-mui-toggle="dropdown"><span class="label"></span><i class="efl-icon-font_icons-chevron"></i></button>\n                                                <ul id="efl-language-dropdown-list" class="mui-dropdown__menu mui-dropdown__menu--right"></ul>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div id="efl-progress-small" class="efl-small-progress-bar"></div>\n                                <div id="efl-title-timer-container">\n                                    <h1 id="efl-title"></h1>\n                                    <div id="efl-timer-container">\n                                        <div id="efl-timer" class="mui-col-xs-12 mui-col-sm-4">\n                                            <span id="efl-timer-clock">\n                                                <svg id="efl-timer-svg" viewbox="0 0 22 22">\n                                                    <path id="efl-timer-path" transform="translate(11, 11)"></path>\n                                                </svg>\n                                            </span>\n                                            <span id="efl-timer-time"></span>\n                                            <button id="efl-timer-button"></button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div id="efl-player-container" style="overflow-y: auto">\n                    <div class="mui-container-fluid">\n                        <div id="efl-loading" class="efl-loading">\n                            <svg class="efl-spinner" width="200px" height="200px" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">\n                                <circle fill="none" stroke-width="16" stroke-linecap="round" cx="100" cy="100" r="84"></circle>\n                            </svg>\n                            <div>\n                                The application is preparing the next step.<br />It can last up to 2 minutes.\n                            </div>\n                        </div>\n\n                        <div class="mui-row">\n                            <div class="mui-col-xs-12">\n                                <div id="efl-player" class="efl-player"></div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class="efl-footer">\n                        <div class="mui-container-fluid">\n                            <div class="mui-row">\n                                <div class="mui-col-xs-12">\n                                    <div id="efl-journey-footer">\n                                        <button id="efl-back-button" class="mui-btn mui-btn--large mui-btn--primary mui-btn--fab efl-left"><i class="efl-icon-font_icons-left-arrow"></i></button>\n                                        <button id="efl-next-button" class="mui-btn mui-btn--large mui-btn--primary mui-btn--fab efl-right"><i class="efl-icon-font_icons-right-arrow"></i></button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                <div>\n            ';i.innerHTML=s,document.getElementById("efl-back-button").onclick=function(){e.backButtonTapped()},document.getElementById("efl-next-button").onclick=function(){e.nextButtonTapped()},document.getElementById("efl-timer-button").onclick=function(){e.changeTimerState()},e.player.target="efl-player",e.setupLanguageList(),e.setupEventsListeners(),e.updateUIState(),n()})}},{key:"getModules",value:function(t){var e=this;return new Promise(function(n,r){try{e.fetchModulesData(t).then(function(t){var r=e.parseModulesData(t);n(r)})["catch"](function(t){r(t)})}catch(i){r(i)}})}},{key:"backButtonTapped",value:function(){this.moduleState===h.STEP_STARTED&&this.player.backButtonTapped()}},{key:"nextButtonTapped",value:function(){this.moduleState===h.STEP_STARTED?this.player.nextButtonTapped():this.moduleState===h.LIBRARY_INITIALIZED&&this.startNextStep()}},{key:"startNextStep",value:function(){var t=this;if(this.currentStep){if(!this.steps[this.currentStep].nextStep)return void console.warn("No next step");this.currentModuleNumber+=1,this.currentStepProgress=0,this.currentStep=this.steps[this.currentStep].nextStep}else this.currentStep=this.firstStep;var e=this.steps[this.currentStep],n=this.modules[e.module];this.moduleState=h.STEP_LOADING,this.setTitle(e.title),this.updateUIState(),this.player.moduleLoadedHandler=function(){t.player.moduleLoadedHandler=void 0,t.moduleState=h.STEP_STARTED,t.updateUIState()},this.stepTimer=Date.now();var r=this.updateConfig(n.config);this.player.loadModule(this.currentStep,n.uri,r)}},{key:"finishedScreen",value:function(t){0>t&&(t=0),t>100&&(t=100),this.currentStepProgress=t,100===t&&(this.moduleState===h.STEP_SEND_RESULTS?this.finishedModule():(this.moduleState=h.SCREENS_COMPLETED,this.updateUIState()))}},{key:"handleModuleReturnValues",value:function(t,e,n,r,i){var o=Math.floor(Date.now()-this.stepTimer);n||(n={}),n.timeElapsed=o,this.applicant=this.mergeObjects(this.applicant,r),this.sendObservations(t,this.completedStep,e,n,r,i),this.completedStep++,this.moduleState===h.SCREENS_COMPLETED?this.finishedModule():this.moduleState=h.STEP_SEND_RESULTS}},{key:"moduleException",value:function(t,e){console.error(t+" error: "+e)}},{key:"finishedModule",value:function(){this.steps[this.currentStep].nextStep?(this.moduleState=h.STEP_FINISHED,this.startNextStep()):(this.player.closeModule(),this.moduleState=h.APPLICATION_FINISHED,this.sendFinishedApplication(this.completedStep++),this.updateUIState())}},{key:"setupPlayer",value:function(t){var e=this;this.player=t,this.player.moduleFinishedHandler=function(t,n,r,i,o){e.handleModuleReturnValues(t,n,r,i,o)},this.player.screenFinishedHandler=function(t){e.finishedScreen(t)},this.player.screenLoadedHandler=function(t){e.showBackButton=t.showBackButton===!0,e.showNextButton=t.showNextButton===!0,e.stepHideTitle=t.hideTitle===!0,e.stepHideProgress=t.hideProgress===!0,e.showTimer=t.showTimer===!0,e.timerInitialized=!1,e.updateUIState()},this.player.moduleExceptionHandler=this.moduleException,this.player.moduleHeightChangedHandler=function(t){e.moduleHeightUpdated(t)},this.player.initTimerHandler=function(t,n,r){e.setupTimer(t,n,r)},this.player.startTimerHandler=function(){e.startTimer()},this.player.pauseTimerHandler=function(){e.changeTimerState(!0)},this.player.requestTimerTimeHandler=function(){e.sendCurrentTime()}}},{key:"setupNavigation",value:function(t){"boolean"==typeof t.logo&&(this.navigation.logo=t.logo),t.logoSrc&&(this.navigation.logoSrc=t.logoSrc),"boolean"==typeof t.title&&(this.navigation.title=t.title),"boolean"==typeof t.progressBar&&(this.navigation.progressBar=t.progressBar),"boolean"==typeof t.localization&&(this.navigation.localization=t.localization),"boolean"==typeof t.timer&&(this.navigation.timer=t.timer),"boolean"==typeof t.helpButton&&(this.navigation.helpButton=t.helpButton),"boolean"==typeof t.buttons&&(this.navigation.buttons=t.buttons)}},{key:"getStyleConfig",value:function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&(200==r.status?e(r.responseText):n(new Error("Can't get "+t+". Status: "+r.statusText)))},r.onError=function(){n(new Error("Can't get "+t+". Status: "+r.statusText))},r.open("GET",t,!0),r.send()})}},{key:"updateUIState",value:function(){var t=this.moduleState,e=t===h.LIBRARY_NOT_INITIALIZED||t===h.STEP_LOADING||t===h.SCREENS_COMPLETED,n=this.showFooter&&this.navigation.buttons&&(t===h.LIBRARY_INITIALIZED||t==h.STEP_STARTED&&this.showNextButton),r=this.showFooter&&this.navigation.buttons&&t==h.STEP_STARTED&&this.showBackButton,i=this.showHeader&&this.navigation.title&&(t===h.STEP_STARTED||t===h.SCREENS_COMPLETED||t===h.STEP_SEND_RESULTS)&&!this.stepHideTitle,o=this.showHeader&&this.navigation.progressBar&&!this.stepHideProgress,s=this.showHeader&&this.navigation.localization,a=this.showHeader&&this.navigation.logo,u=t===h.STEP_STARTED&&this.showHeader&&this.navigation.timer&&this.showTimer&&this.timerInitialized,c=document.querySelector(".efl-top-bar");this.showHeader?c.classList.remove("efl-hidden"):c.classList.add("efl-hidden");var l=document.querySelector(".efl-footer");this.showFooter?l.classList.remove("efl-hidden"):l.classList.add("efl-hidden");var f=document.getElementById("efl-loading");e?f.classList.remove("efl-hidden"):f.classList.add("efl-hidden");var p=document.getElementById("efl-player");e?p.classList.add("efl-hidden"):p.classList.remove("efl-hidden");var d=document.getElementById("efl-next-button");n?d.classList.remove("efl-hidden"):d.classList.add("efl-hidden");var v=document.getElementById("efl-back-button");r?v.classList.remove("efl-hidden"):v.classList.add("efl-hidden");var _=document.getElementById("efl-title");i?_.classList.remove("efl-hidden"):_.classList.add("efl-hidden");var m=document.getElementById("efl-logo");a?m.classList.remove("efl-hidden"):m.classList.add("efl-hidden");var g=document.getElementById("efl-progress"),y=document.getElementById("efl-progress-small");for(o?g.classList.remove("efl-hidden"):g.classList.add("efl-hidden"),o?y.classList.remove("efl-hidden"):y.classList.add("efl-hidden");g.firstChild;)g.removeChild(g.firstChild);for(;y.firstChild;)y.removeChild(y.firstChild);if(this.modules){Object.keys(this.modules).forEach(function(){var t=document.createElement("div");t.setAttribute("class","efl-module-bar"),t.innerHTML='<div class="efl-filling"></div>',g.appendChild(t),t=document.createElement("div"),t.setAttribute("class","efl-module-bar"),t.innerHTML='<div class="efl-filling"></div>',y.appendChild(t)});for(var b=0;b<this.currentModuleNumber;b++)g.children[b].children[0].style.width="100%",y.children[b].children[0].style.width="100%";g.children[this.currentModuleNumber].children[0].style.width=this.currentStepProgress+"%",y.children[this.currentModuleNumber].children[0].style.width=this.currentStepProgress+"%";
}var w=document.getElementById("efl-locale-select");s?w.classList.remove("efl-hidden"):w.classList.add("efl-hidden");var x=document.getElementById("efl-timer-container");u?x.classList.remove("efl-hidden"):x.classList.add("efl-hidden");var E=document.createEvent("Event");E.initEvent("EFLJourneyUpdateUi",!0,!0),document.dispatchEvent(E)}},{key:"fetchModulesData",value:function(t){return this.api.fetchModules(t)}},{key:"sendObservations",value:function(t,e,n,r,i,o){return this.api.finishStep({step:t,sequence:e,observations:n,metas:r,state:o,applicant:i}).then(this.api.getProgress).then(function(t){console.log(t)})}},{key:"sendFinishedApplication",value:function(t){return this.api.finishApplication({sequence:t}).then(this.api.getProgress).then(function(t){console.log(t)})}},{key:"parseModulesData",value:function(t){var e,n,r=t.modules,i={},o=t.applicant;t.state&&t.state.completedSteps&&t.state.completedSteps.length&&(n=t.state.completedSteps[t.state.completedSteps.length-1]);for(var s in t.steps)if(t.steps.hasOwnProperty(s)){for(var a={title:t.steps[s].title,module:t.steps[s].module},u=t.steps[s].links,c=0;c<u.length;c++){var l=u[c];"next"===l.type&&(a.nextStep=l.target)}i[s]=a,t.steps[s].isRoot===!0&&(e=s)}return{modules:r,steps:i,firstStep:e,currentStep:n,applicant:o}}},{key:"setupLanguageList",value:function(){var t=this,e=document.getElementById("efl-language-dropdown-list");Object.keys(this.L20n.locales).forEach(function(n){var r=document.createElement("li"),i=document.createElement("a");i.setAttribute("data-key",n),i.setAttribute("data-name",t.L20n.locales[n].name),t.L20n.setKey(i,n),i.onclick=function(e){e.preventDefault(),t.selectLanguage(e.target.getAttribute("data-key"))},r.appendChild(i),e.appendChild(r)}),this.selectLanguage(this.L20n.defaultLanguage)}},{key:"selectLanguage",value:function(t){this.currentLocale=t,this.L20n.setKey(document.querySelector("#efl-selected-language-button > span.label"),t),this.L20n.selectLanguage(t),this.player.languageChanged(t)}},{key:"localePickerChanged",value:function(){var t=document.getElementById("efl-locale-select").value;this.player.languageChanged(t)}},{key:"setTitle",value:function(t){document.getElementById("efl-title").innerHTML=t}},{key:"updateConfig",value:function(t){var e=t;e.applicantJourney||(e.applicantJourney={}),e.applicantJourney.step||(e.applicantJourney.step={}),e.applicantJourney.step.locale=this.currentLocale,this.moduleStyle&&(e.applicantJourney.step.style=this.moduleStyle),e.applicant=this.applicant;var n=this.steps[this.currentStep];return e.applicantJourney.step.moduleKey||(e.applicantJourney.step.moduleKey=n.module),e.applicantJourney.step.title||(e.applicantJourney.step.title=n.title),e.applicantJourney.step.ordinal||(e.applicantJourney.step.ordinal=this.completedStep),e}},{key:"moduleHeightUpdated",value:function(t){var e=document.getElementById("efl-player"),n=e.clientHeight;t!=n&&(e.style.height=t+"px")}},{key:"stickyFooter",value:function(){try{var t=document.querySelector(".efl-journey-root .efl-top-bar"),e=t.parentNode.offsetHeight,n=e-t.offsetHeight,r=document.querySelector(".efl-journey-root .efl-footer").offsetHeight,i=document.querySelector("#efl-player"),o=document.querySelector("#efl-loading"),s=1,a=n-r-s+"px";"none"===window.getComputedStyle(o,null).display?i.style.minHeight=a:o.style.minHeight=a;var u=document.querySelector("#efl-player-container");u.style.height=n+"px"}catch(c){}}},{key:"setupEventsListeners",value:function(){var t=this;this.context.addEventListener("resize",function(){t.stickyFooter()},!1),document.addEventListener("DOMContentLoaded",function(){t.stickyFooter()},!1),document.addEventListener("EFLJourneyUpdateUi",function(){t.stickyFooter()},!1)}},{key:"setupTimer",value:function(t,e,n){this.showTimer&&this.navigation.timer&&this.showHeader&&(this.timerInitialTime=t,this.timerStarted=!1,this.timerPaused=!1,this.realElapsedTime=0,this.timerFinished=!1,this.enableTimerControl=n,this.enableTimerExtension=e,this.timerExtended=!1,this.setupTimerControl(!1),this.updateTimerPath(360),this.setupTimerLabel(this.timerInitialTime),this.setupTimerButton(!1),this.timerInitialized=!0,this.updateUIState(),this.player.initializedTimer())}},{key:"startTimer",value:function(){if(this.timerInitialized&&(!this.timerStarted||this.timerPaused||this.timerExtended)){this.setupTimerControl(this.enableTimerControl),this.startTimerTimestamp=(new Date).getTime(),this.timerPaused=!1,this.setupTimerButton(!0);var t=this,e=1e3;e>this.timerInitialTime/360&&(e=this.timerInitialTime/360);var n=function r(){if(!t.timerPaused&&t.timerInitialized&&t.moduleState==h.STEP_STARTED){var n,i=t.realElapsedTime+(new Date).getTime()-t.startTimerTimestamp;n=t.timerInitialTime<0?0:360-i/t.timerInitialTime*360,t.updateTimerPath(n);var o=t.timerInitialTime-i;t.setupTimerLabel(o),o>0?setTimeout(function(){r()},e):0>=o&&(t.setupTimerControl(!1),t.timerFinished=!0,t.realElapsedTime=i,t.enableTimerExtension?t.showTimeExtensionModal():t.sendFinishedTimer())}};n(),this.timerStarted||(this.timerStarted=!0,this.player.changedTimerState(l.TIMER_STATES.STARTED)),this.timerExtended&&(this.timerExtended=!1,this.player.changedTimerState(l.TIMER_STATES.STARTED))}}},{key:"updateTimerPath",value:function(t){var e=document.getElementById("efl-timer-path"),n=document.getElementById("efl-timer-svg"),r=11;if(t>0){n.classList.remove("efl-hidden");var i=t*Math.PI/180,o=Math.round(Math.sin(i)*-r*1e3)/1e3,s=Math.round(Math.cos(i)*-r*1e3)/1e3,a=t>180?1:0,u="M 0 0 v -"+r+" A "+r+" "+r+" 1 "+a+" 0 "+o+" "+s+" z";e.setAttribute("d",u)}else n.classList.add("efl-hidden")}},{key:"setupTimerLabel",value:function(t){var e=t;0>e&&(e=0);var n=Math.floor(e/6e4),r=Math.ceil(e%6e4/1e3);60==r&&(n++,r=0);var i=10>r?"0":"",o=document.getElementById("efl-timer-time");o.innerText=n+":"+i+r}},{key:"setupTimerButton",value:function(t){var e=document.getElementById("efl-timer-button"),n=t?"efl-icon-font_icons-pause":"efl-icon-font_icons-play";e.innerHTML='<i class="'+n+'"></i>'}},{key:"changeTimerState",value:function(t){this.timerStarted&&!this.timerFinished&&(void 0===t&&(t=!this.timerPaused),t!=this.timerPaused&&(this.setupTimerButton(!t),t?(this.changeTimerOverlayState(!0),this.realElapsedTime+=(new Date).getTime()-this.startTimerTimestamp,this.timerPaused=!0):(this.startTimer(),this.changeTimerOverlayState(!1)),this.player.changedTimerState(t?l.TIMER_STATES.PAUSED:l.TIMER_STATES.STARTED)))}},{key:"sendCurrentTime",value:function(){if(this.timerInitialized){var t=this.realElapsedTime;this.timerFinished||this.timerPaused||(t+=(new Date).getTime()-this.startTimerTimestamp),this.player.timerTimeResponse(Math.ceil(t))}}},{key:"setupTimerControl",value:function(t){var e=document.getElementById("efl-timer-button");t?e.classList.remove("efl-hidden"):e.classList.add("efl-hidden")}},{key:"changeTimerOverlayState",value:function(t){for(var e=document.getElementById("efl-below-nav-overlay"),n=document.getElementById("efl-nav-overlay"),r=[e,n],i=0;i<r.length;i++){var o=r[i];t?(o.classList.remove("efl-hidden","efl-hide-animation"),o.classList.add("efl-show-animation")):!function(){o.classList.remove("efl-show-animation"),o.classList.add("efl-hide-animation");var t=function e(t){t.srcElement.classList.add("efl-hidden"),t.srcElement.removeEventListener("webkitAnimationEnd",e)};o.addEventListener("webkitAnimationEnd",t)}()}}},{key:"mergeObjects",value:function(t,e){if("object"!=typeof e)return t;if("object"!=typeof t)return e;var n=t;for(var r in e)e.hasOwnProperty(r)&&(n.hasOwnProperty(r)&&"object"==typeof e[r]?n[r]=this.mergeObjects(t[r],e[r]):n[r]=e[r]);return n}},{key:"showTimeExtensionModal",value:function(){var t=this,e='\n            <div class="efl-modal" id="efl-time-extension-modal">\n                <h2>Would you like an extension?</h2>\n                <div>Your time has expired, but you may select to extend your time if you like.</div>\n                <form>\n                    <div>Choose time to add:</div>\n                    <div class="efl-radio">\n                        <input type="radio" name="timeExtensionRadio" id="timeExtensionRadio_30" value="30" />\n                        <span><span></span></span>\n                        <label for="timeExtensionRadio_30">30 seconds</label>\n                    </div>\n                    <div class="efl-radio">\n                        <input type="radio" name="timeExtensionRadio" id="timeExtensionRadio_60" value="60" />\n                        <span><span></span></span>\n                        <label for="timeExtensionRadio_60">60 seconds</label>\n                    </div>\n                </form>\n                <div class="mui-row efl-buttons-row">\n                    <div class="mui-col-xs-12 mui-col-sm-6" id="efl-time-extension-cancel">\n                        <button class="mui-btn mui-btn--raised efl-button-small efl-primary">NO, THANKS</button>\n                    </div>\n                    <div class="mui-col-xs-12 mui-col-sm-6" id="efl-time-extension-ok">\n                        <button class="mui-btn mui-btn--raised efl-button efl-action" disabled>ADD TIME <i class="efl-icon-font_icons-check"></i></button>\n                    </div>\n                </div>\n            </div>\n        ';this.showModal(e),document.querySelector("#efl-time-extension-cancel button").onclick=function(){var e=t;t.hideModal().then(function(){e.sendFinishedTimer()})},document.querySelector("#efl-time-extension-ok button").onclick=function(){var e=t,n=1e3*document.querySelector("input[name=timeExtensionRadio]:checked").value;t.hideModal().then(function(){e.extendTimerTime(n)})};for(var n=document.querySelectorAll("#efl-time-extension-modal input[type=radio]"),r=0;r<n.length;r++)n[r].onchange=function(){document.querySelector("#efl-time-extension-ok > button").removeAttribute("disabled")}}},{key:"showModal",value:function(t){var e='\n            <div class="mui-container-fluid">\n                <div class="mui-row">\n                    <div id="efl-global-overlay-container" class="mui-col-xs-12">\n                        '+t+"\n                    </div>\n                </div>\n            </div>\n        ",n=document.querySelector(".efl-journey-root"),r=document.createElement("div");r.id="efl-global-overlay",r.classList.add("efl-show-animation"),r.innerHTML=e;var i=r.querySelector(".efl-modal");i.classList.add("efl-modal-slide-down-animation"),i.style.opacity=0,n.appendChild(r)}},{key:"hideModal",value:function(){return new Promise(function(t,e){var n=document.querySelector(".efl-journey-root"),r=document.querySelector("#efl-global-overlay");r?!function(){r.classList.remove("efl-show-animation"),r.classList.add("efl-hide-animation");var e=function i(){r.removeEventListener("webkitAnimationEnd",i),n.removeChild(r),t()};r.addEventListener("webkitAnimationEnd",e)}():e(new Error("No overlay object"))})}},{key:"sendFinishedTimer",value:function(){this.player.changedTimerState(l.TIMER_STATES.FINISHED)}},{key:"extendTimerTime",value:function(t){this.timerFinished=!1,this.timerExtended=!0,this.timerInitialTime+=t,this.startTimer()}}]),t}();e.EFLJourney=f},function(t,e){"use strict";function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){return new Promise(function(r,i){var o=new XMLHttpRequest;o.open(t,e),o.setRequestHeader("Content-Type","application/json"),o.onload=function(){o.status>=200&&o.status<300?r(JSON.parse(o.responseText)):i(new Error("Error in request: ["+o.status+"] "+t+", "+e+", "+o.responseText+"."))},o.onerror=function(){i(new Error("Error in request: "+t+", "+e+", "+o.responseText+"."))},n?o.send(JSON.stringify(n)):o.send()})}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e,n){for(var r=!0;r;){var i=t,o=e,s=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var u=a.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(i);if(null===c)return;t=c,e=o,n=s,r=!0,a=c=void 0}},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t){return null==t?{}:t},u=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=e.authorizationToken,i=e.requestToken,o=e.uid;if(r(this,t),!n||!i||!o)throw new Error("Session: missing params");this.authorizationToken=n,this.requestToken=i,this.uid=o,this.save=this.save.bind(this),this.save()}return s(t,[{key:"save",value:function(){window.localStorage.setItem("session",JSON.stringify({authorizationToken:this.authorizationToken,requestToken:this.requestToken,uid:this.uid}))}}],[{key:"load",value:function(){var e=JSON.parse(window.localStorage.getItem("session"));if(e)return new t(e);throw new Error("No session data.")}}]),t}(),c=function(){function t(e){if(r(this,t),!e||"object"!=typeof e)throw new Error("Config object is required.");if(!e.encrypterUrl)throw new Error("'encrypterUrl' missing in config object.");if(!e.backendUrl)throw new Error("'backendUrl' missing in config object.");this.config=e,this.fetchModules=this.fetchModules.bind(this),this.finishStep=this.finishStep.bind(this),this.finishApplication=this.finishApplication.bind(this),this.getProgress=this.getProgress.bind(this),this._login=this._login.bind(this),this._startSession=this._startSession.bind(this),this._resumeSession=this._resumeSession.bind(this),this._startApplication=this._startApplication.bind(this),this._finishApplication=this._finishApplication.bind(this),this._finishStep=this._finishStep.bind(this),this._getProgress=this._getProgress.bind(this)}return s(t,[{key:"fetchModules",value:function(){throw new Error("Not implemented.")}},{key:"finishStep",value:function(){throw new Error("Not implemented.")}},{key:"finishApplication",value:function(){throw new Error("Not implemented.")}},{key:"getProgress",value:function(){throw new Error("Not implemented.")}},{key:"_login",value:function(){throw new Error("Not implemented.")}},{key:"_startSession",value:function(){throw new Error("Not implemented.")}},{key:"_resumeSession",value:function(){throw new Error("Not implemented.")}},{key:"_startApplication",value:function(){throw new Error("Not implemented.")}},{key:"_finishApplication",value:function(){throw new Error("Not implemented.")}},{key:"_finishStep",value:function(){throw new Error("Not implemented.")}},{key:"_getProgress",value:function(){throw new Error("Not implemented.")}},{key:"_validate",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];e.forEach(function(e){if(!t.hasOwnProperty(e))throw new Error("Missing "+e+" parameter.")})}}]),t}(),l=function(t){function e(){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return n(e,t),s(e,[{key:"fetchModules",value:function(t){var e=this;if(!t)throw new Error("applicationName is required.");return new Promise(function(n,r){return e._login().then(function(n){e.authorizationToken=n.authorizationToken,e.requestToken=n.requestToken;try{return e.session=u.load(),e._resumeSession({authorizationToken:e.authorizationToken,requestToken:e.requestToken,sessionId:e.session.uid,applicant:{}})}catch(r){return e._startSession({authorizationToken:e.authorizationToken,requestToken:e.requestToken,applicationName:t})}}).then(function(t){return e.session=new u({authorizationToken:e.authorizationToken,requestToken:e.requestToken,uid:t.data.uid}),e._startApplication({authorizationToken:e.authorizationToken,requestToken:e.requestToken,sessionId:e.session.uid})}).then(function(t){n({modules:t.data.modules,steps:t.data.steps,applicant:t.data.applicant,state:t.data.state,indicators:t.data.indicators})})["catch"](function(t){console.log(t),r(t)})})}},{key:"finishStep",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.step,n=t.sequence,r=t.observations,i=t.metas,o=t.state,s=t.applicant;return this._finishStep({authorizationToken:this.authorizationToken,requestToken:this.requestToken,sessionId:this.session.uid,step:e,sequence:n,observations:r,metas:i,state:o,applicant:s})}},{key:"finishApplication",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.sequence;return this._finishApplication({authorizationToken:this.authorizationToken,requestToken:this.requestToken,sessionId:this.session.uid,sequence:e})}},{key:"getProgress",value:function(){return this._getProgress({authorizationToken:this.authorizationToken,requestToken:this.requestToken,sessionId:this.session.uid})}},{key:"_login",value:function(){return i("POST",this.config.encrypterUrl)}},{key:"_startSession",value:function(t){this._validate(t,["authorizationToken","requestToken","applicationName"]);var e=t.authorizationToken,n=t.requestToken,r=t.applicationName;return i("POST",this.config.backendUrl+"startSession.json",{authToken:e,reqToken:n,data:{application:r,applicant:a({})}})}},{key:"_resumeSession",value:function(t){this._validate(t,["authorizationToken","requestToken","sessionId","applicant"]);var e=t.authorizationToken,n=t.requestToken,r=t.sessionId,o=t.applicant;return i("POST",this.config.backendUrl+"resumeSession.json",{authToken:e,reqToken:n,data:{uid:r,applicant:a(o)}})}},{key:"_startApplication",value:function(t){this._validate(t,["authorizationToken","requestToken","sessionId"]);var e=t.authorizationToken,n=t.requestToken,r=t.sessionId;return i("POST",this.config.backendUrl+"startApplication.json",{authToken:e,reqToken:n,data:{uid:r,player:{type:"web-embedded",version:"1"},device:{}}})}},{key:"_finishApplication",value:function(t){this._validate(t,["authorizationToken","requestToken","sessionId","sequence"]);var e=t.authorizationToken,n=t.requestToken,r=t.sessionId,o=t.sequence;return i("POST",this.config.backendUrl+"finishApplication.json",{authToken:e,reqToken:n,data:{uid:r,sequence:o}})}},{key:"_finishStep",value:function(t){this._validate(t,["authorizationToken","requestToken","sessionId","step","sequence","observations","metas","state","applicant"]);var e=t.authorizationToken,n=t.requestToken,r=t.sessionId,o=t.step,s=t.sequence,u=t.observations,c=t.metas,l=t.state,h=t.applicant;return i("POST",this.config.backendUrl+"finishStep.json",{authToken:e,reqToken:n,data:{uid:r,step:o,sequence:s,observations:a(u),metas:a(c),state:a(l),applicant:a(h)}})}},{key:"_getProgress",value:function(t){this._validate(t,["authorizationToken","requestToken","sessionId"]);var e=t.authorizationToken,n=t.requestToken,r=t.sessionId;t.applicant;return i("POST",this.config.backendUrl+"getProgress.json",{authToken:e,reqToken:n,data:{uid:r}})}}]),e}(c);e["default"]=l,t.exports=e["default"]},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this.localePath=e.localePath,this.locales=this.setupLocales(e.locales),this.defaultLanguage=e.defaultLanguage||this.setDefaultLocale(),this.availableLanguages=Object.keys(this.locales),this.reload()}return r(t,[{key:"reload",value:function(){this.remote&&(window.removeEventListener("languagechange",this.remote),document.removeEventListener("additionallanguageschange",this.remote)),this.buildLocales(),this.remote=new L20n.Remote(L20n.fetchResource,L20n.broadcast,navigator.languages),window.addEventListener("languagechange",this.remote),document.addEventListener("additionallanguageschange",this.remote),this.l10n=new L20n.View(new L20n.Client(this.remote),document)}},{key:"buildLocales",value:function(){for(var t=document.querySelector("head"),e=t.querySelectorAll('meta[name="availableLanguages"],meta[name="defaultLanguage"],link[rel="localization"]'),n=0;n<e.length;n++)e[n].parentElement.removeChild(e[n]);var r=document.createElement("link");if(r.setAttribute("rel","localization"),r.setAttribute("href",this.localePath),t.appendChild(r),this.defaultLanguage){var i=document.createElement("meta");i.setAttribute("name","defaultLanguage"),i.setAttribute("content",this.defaultLanguage),t.appendChild(i)}var o=document.createElement("meta");o.setAttribute("name","availableLanguages"),o.setAttribute("content",this.availableLanguages.join(", ")),t.appendChild(o)}},{key:"setupLocales",value:function(t){var e=Object.keys(t);if(e.length>0)for(var n={},r=0;r<e.length;r++)t.hasOwnProperty(e[r])&&t[e[r]].name&&(n[e[r].toLowerCase()]={name:t[e[r]].name});return n}},{key:"setDefaultLocale",value:function(){var t=(navigator.language||navigator.browserLanguage).toLocaleLowerCase(),e=t.split("-")[0],n=Object.keys(this.locales)[0];if(this.locales.hasOwnProperty(t))n=t;else if(this.locales.hasOwnProperty(e))n=e;else{var r=!1;for(var i in this.locales)if(i.split("-")[0]===e){n=i,r=!0;break}!r&&this.locales.hasOwnProperty("en")&&(n="en")}return n}},{key:"setKey",value:function(t,e){this.l10n.setAttributes(t,e)}},{key:"selectLanguage",value:function(t){this.l10n.requestLanguages([t])}},{key:"setDefaultLanguage",value:function(t){this.defaultLanguage=t,this.reload()}},{key:"setAvailableLanguages",value:function(t){this.availableLanguages=t,this.reload()}}]),t}();e["default"]=i,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={INITIALIZE_MODULE:"initializeModule",PRESSED_NAVIGATION_BUTTON:"pressedNavigationButton",LOADED_MODULE:"loadedModule",LOADED_SCREEN:"loadedScreen",FINISHED_SCREEN:"finishedScreen",FINISHED_MODULE:"finishedModule",CAUGHT_EXCEPTION:"caughtException",CHANGED_LANGUAGE:"changedLanguage",CHANGED_HEIGHT:"changedHeight",INITIALIZED_TIMER:"initializedTimer",CHANGED_TIMER_STATE:"changedTimerState",TIMER_TIME_RESPONSE:"timerTimeResponse",INIT_TIMER:"initTimer",START_TIMER:"startTimer",PAUSE_TIMER:"pauseTimer",REQUEST_TIMER_TIME:"requestTimerTime",CHANGED_VIEW:"changedView"};e.MODULE_EVENTS=n;var r={STARTED:"STARTED",PAUSED:"PAUSED",FINISHED:"FINISHED"};e.TIMER_STATES=r}]);
//# sourceMappingURL=efl-journey.min.js.map
